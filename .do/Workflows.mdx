---
title: Workflows
description: Orchestrate anything with the $ context. Events, schedules, retries - all declarative.
---

# Workflows

Orchestrate anything with the `$` context. Events, schedules, retries—all declarative.

```typescript
export class OnboardingWorkflow extends Workflow {
  async run() {
    await $.do(this.sendWelcomeEmail)
    await $.do(this.createAccount)
    await $.do(this.notifyTeam)
  }
}
```

---

## The $ Context

Every Durable Object has a workflow context. No imports needed.

```typescript
// Three durability levels
$.send(event)              // Fire-and-forget
$.try(action)              // Single attempt
$.do(action)               // Durable with retries

// Event handlers
$.on.Customer.signup(handler)
$.on.Payment.failed(handler)
$.on.Order.placed(handler)

// Scheduling
$.every.hour(handler)
$.every.monday.at('9am')(handler)
$.in(5).minutes(handler)
```

---

## Event-Driven

React to any Noun.verb combination. Infinite possibilities.

```typescript
// Customer events
$.on.Customer.signup(async (customer) => {
  await sendWelcomeEmail(customer)
  await createSlackChannel(customer)
})

$.on.Customer.churn(async (customer) => {
  await sendWinbackEmail(customer)
  await notifySales(customer)
})

// Payment events
$.on.Payment.succeeded(async (payment) => {
  await fulfillOrder(payment.orderId)
})

$.on.Payment.failed(async (payment) => {
  await notifyCustomer(payment)
  await retryInOneDay(payment)
})
```

---

## Scheduling

Cron, intervals, delays—all in natural language.

```typescript
// Fixed intervals
$.every.hour(generateReport)
$.every(15).minutes(checkHealth)
$.every.day.at('midnight')(cleanupLogs)

// Weekly schedules
$.every.monday.at('9am')(planSprint)
$.every.friday.at('5pm')(sendDigest)

// Delays
$.in(5).minutes(sendReminder)
$.in(24).hours(followUp)
```

---

## Durability Levels

<Tabs defaultValue="do">
  <TabsList>
    <TabsTrigger value="send">$.send</TabsTrigger>
    <TabsTrigger value="try">$.try</TabsTrigger>
    <TabsTrigger value="do">$.do</TabsTrigger>
  </TabsList>

  <TabsContent value="send">
    **Fire-and-forget.** No confirmation. Best for analytics, logging.

    ```typescript
    $.send({ type: 'pageview', url: '/home' })
    $.send({ type: 'click', button: 'signup' })
    ```

    - No retry
    - No confirmation
    - Lowest latency
  </TabsContent>

  <TabsContent value="try">
    **Single attempt.** Fails fast. Good for idempotent operations.

    ```typescript
    const result = await $.try(fetchData)
    if (!result.ok) {
      // Handle failure
    }
    ```

    - One attempt
    - Returns success/failure
    - No automatic retry
  </TabsContent>

  <TabsContent value="do">
    **Durable execution.** Retries with exponential backoff.

    ```typescript
    await $.do(processPayment)
    // Will retry until success or max attempts
    ```

    - Automatic retry
    - Exponential backoff
    - At-least-once delivery
  </TabsContent>
</Tabs>

---

## Composition

Workflows compose with other workflows.

```typescript
export class LaunchWorkflow extends Workflow {
  async run() {
    // Sequential
    const spec = await $.do(() => priya`define the MVP`)
    const app = await $.do(() => ralph`build ${spec}`)

    // Parallel
    await Promise.all([
      $.do(() => mark`announce the launch`),
      $.do(() => sally`start outreach`),
    ])
  }
}
```

---

## Error Handling

```typescript
export class ResilientWorkflow extends Workflow {
  async run() {
    try {
      await $.do(riskyOperation)
    } catch (error) {
      await $.do(handleError)
      await $.do(notifyOps)
    }
  }
}
```

---

<CTA primary="/docs/workflows">
  Build your first Workflow
</CTA>
