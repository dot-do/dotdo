---
title: "@dotdo/slack"
description: Slack SDK-compatible package for edge environments and testing with in-memory mode.
---

# @dotdo/slack

Drop-in replacement for the Slack JavaScript SDKs (`@slack/web-api` and `@slack/bolt`). Your existing Slack code works unchanged - just swap the import.

```typescript
import { WebClient, App } from '@dotdo/slack'

// Create client without token for local mode
const client = new WebClient()

await client.chat.postMessage({
  channel: 'C1234567890',
  text: 'Hello, World!',
})

// Messages stored in memory for testing
```

<Callout type="info">
Looking for production Slack integration? See [slack.do](/docs/integrations/slack/service) for a managed edge service that forwards to real Slack APIs.
</Callout>

## Why @dotdo/slack?

| Slack SDK | @dotdo/slack |
|-----------|--------------|
| Node.js runtime required | Edge-compatible (Cloudflare Workers) |
| Requires `@slack/web-api` + `@slack/bolt` | Single unified package |
| Complex Socket Mode setup | Built-in Socket Mode client |
| No local testing mode | In-memory mode for testing |
| Separate Block Kit JSON | Fluent Block Kit builder |
| Webhook tunnel for dev | Built-in request handling |

**This is a compatibility layer** with a MongoDB-compatible API. In local mode (no token), data is stored in-memory. Ideal for testing, prototyping, and edge environments.

## Installation

```bash
npm install @dotdo/slack
```

## Features

### Implemented (Core APIs)

**WebClient**
- `chat.postMessage()`, `chat.update()`, `chat.delete()`, `chat.scheduleMessage()`
- `conversations.list()`, `conversations.history()`, `conversations.info()`
- `conversations.create()`, `conversations.join()`, `conversations.leave()`
- `conversations.archive()`, `conversations.unarchive()`, `conversations.invite()`, `conversations.kick()`
- `conversations.members()`, `conversations.rename()`, `conversations.setTopic()`, `conversations.setPurpose()`
- `conversations.open()`, `conversations.close()`, `conversations.replies()`, `conversations.mark()`
- `users.list()`, `users.info()`, `users.lookupByEmail()`
- `views.open()`, `views.push()`, `views.update()`, `views.publish()`
- `reactions.add()`, `reactions.remove()`, `reactions.get()`, `reactions.list()`
- `auth.test()`, `auth.revoke()`

**App (Bolt Framework)**
- `message()` - Message pattern matching with string or regex
- `event()` - Event handlers for all Slack event types
- `action()` - Block action handlers
- `view()` - Modal submission and close handlers
- `shortcut()` - Global and message shortcuts
- `command()` - Slash command handlers
- Global middleware support
- Request signature verification

**Block Kit Builder**
- Fluent builder API for all block types
- Section, Divider, Header, Context, Actions, Image, Input, File, Video blocks
- Interactive elements: buttons, selects, date pickers, time pickers, checkboxes, radio buttons
- Modal and Home tab view builders
- Mrkdwn formatting helpers

**Slash Commands**
- Argument parsing with flags and positional args
- Signature verification
- Immediate and delayed responses
- Modal triggers

**OAuth**
- OAuth 2.0 flow helper
- Installation store interface
- State management

### Not Yet Implemented

- File uploads
- Files API
- Reminders API
- Search API
- Stars API
- Team API
- Usergroups API

## Quick Start

### Basic Usage

```typescript
import { WebClient } from '@dotdo/slack'

const client = new WebClient('xoxb-your-token')

// Post a simple message
const result = await client.chat.postMessage({
  channel: '#general',
  text: 'Hello from dotdo!',
})

console.log('Message sent:', result.ts)
```

### Bot Framework

```typescript
import { App } from '@dotdo/slack'

const app = new App({
  token: 'xoxb-token',
  signingSecret: 'signing-secret',
})

// Respond to messages containing "hello"
app.message('hello', async ({ say }) => {
  await say('Hello there!')
})

// Handle app mentions
app.event('app_mention', async ({ event, say }) => {
  await say(`Hi <@${event.user}>! How can I help?`)
})

// Handle button clicks
app.action('button_click', async ({ ack, respond }) => {
  await ack()
  await respond('Button clicked!')
})

// Handle slash commands
app.command('/deploy', async ({ command, ack, respond }) => {
  await ack('Starting deployment...')
  // Long-running operation
  await respond(`Deployed ${command.text} successfully!`)
})

// Export for Cloudflare Workers
export default {
  fetch: app.handleRequest.bind(app),
}
```

## In-Memory Mode for Testing

For testing and development, use the in-memory mode - no real Slack API calls:

```typescript
import { WebClient, _clearAll, _getMessages } from '@dotdo/slack'

// Create client without token for local mode
const client = new WebClient()

// Messages are stored in memory
await client.chat.postMessage({
  channel: 'C1234567890',
  text: 'Test message',
})

// Retrieve messages for testing
const messages = _getMessages()
console.log(messages[0].text) // 'Test message'

// Clear state between tests
_clearAll()
```

### Local Channel Management

```typescript
const client = new WebClient()

// Create a channel locally
const result = await client.conversations.create({
  name: 'test-channel',
  is_private: false,
})

// List channels
const channels = await client.conversations.list()
console.log(channels.channels) // [{ id: 'C...', name: 'test-channel', ... }]

// Get channel history
const history = await client.conversations.history({
  channel: result.channel!.id,
})
```

## Testing with @dotdo/slack

@dotdo/slack is ideal for unit tests - no external Slack workspace required:

```typescript
import { describe, it, expect, beforeEach } from 'vitest'
import { WebClient, _clearAll, _getMessages } from '@dotdo/slack'

describe('NotificationService', () => {
  let client: WebClient

  beforeEach(() => {
    _clearAll() // Fresh state for each test
    client = new WebClient()
  })

  it('should send order confirmation', async () => {
    const service = new NotificationService(client)

    await service.sendOrderConfirmation({
      orderId: '12345',
      channel: 'C123',
    })

    const messages = _getMessages()
    expect(messages).toHaveLength(1)
    expect(messages[0].text).toContain('Order #12345')
  })

  it('should send to correct channel', async () => {
    const service = new NotificationService(client)

    await service.sendAlert('#alerts', 'Server down')

    const messages = _getMessages()
    expect(messages[0].channel).toBe('#alerts')
  })
})
```

### Testing Bot Interactions

```typescript
import { App, _simulateEvent, _clearAll } from '@dotdo/slack'

describe('SlackBot', () => {
  let app: App

  beforeEach(() => {
    _clearAll()
    app = new App({ token: 'test-token', signingSecret: 'test-secret' })

    app.message('hello', async ({ say }) => {
      await say('Hello back!')
    })
  })

  it('should respond to hello', async () => {
    await _simulateEvent({
      type: 'message',
      text: 'hello world',
      channel: 'C123',
      user: 'U123',
    })

    const messages = _getMessages()
    expect(messages).toContainEqual(
      expect.objectContaining({ text: 'Hello back!' })
    )
  })
})
```

## Block Kit Builder

Build rich messages with the fluent Block Kit API:

```typescript
import {
  Blocks,
  section,
  divider,
  header,
  mrkdwn,
  plainText,
  button,
} from '@dotdo/slack'

const blocks = new Blocks()
  .header({ text: plainText('Order Confirmation') })
  .section({
    text: mrkdwn('Your order has been *confirmed*!'),
    accessory: button({
      text: plainText('View Order'),
      action_id: 'view_order',
      style: 'primary',
    }),
  })
  .divider()
  .section({
    fields: [
      mrkdwn('*Order ID:*\n12345'),
      mrkdwn('*Status:*\nProcessing'),
    ],
  })
  .build()

await client.chat.postMessage({
  channel: '#orders',
  text: 'Order Confirmation',
  blocks,
})
```

### Mrkdwn Formatting Helpers

```typescript
import {
  bold,
  italic,
  code,
  codeBlock,
  link,
  mention,
  emoji,
  bulletList,
} from '@dotdo/slack'

const message = `
${bold('Important Update')}
${italic('Posted by')} ${mention('U1234567890')}

${codeBlock('const greeting = "Hello!"', 'javascript')}

Check out ${link('https://example.com', 'our website')}

${emoji('rocket')} ${emoji('tada')}

Tasks:
${bulletList(['Review PR', 'Deploy to staging', 'Run tests'])}
`
```

## Edge Compatibility

Works in Cloudflare Workers without Node.js dependencies:

```typescript
// worker.ts
import { WebClient } from '@dotdo/slack'

export default {
  async fetch(request: Request, env: Env): Promise<Response> {
    const client = new WebClient(env.SLACK_BOT_TOKEN)

    await client.chat.postMessage({
      channel: '#alerts',
      text: 'Alert from edge worker!',
    })

    return new Response('Message sent')
  },
}
```

## Types

Full TypeScript support with comprehensive type definitions:

```typescript
import type {
  Message,
  Channel,
  User,
  Block,
  SlackEvent,
  MessageEvent,
  BlockAction,
  SlashCommand,
  SlackEventMiddlewareArgs,
  SayFn,
  AckFn,
  WebClientOptions,
  ChatPostMessageArguments,
} from '@dotdo/slack'
```

## Error Handling

```typescript
import { SlackError, WebClient } from '@dotdo/slack'

const client = new WebClient('xoxb-token')

try {
  await client.chat.postMessage({
    channel: 'C_INVALID',
    text: 'Hello',
  })
} catch (error) {
  if (error instanceof SlackError) {
    console.log('Code:', error.code)       // 'channel_not_found'
    console.log('Message:', error.message)
  }
}
```

## Migration from Slack SDK

### Package Change

```bash
# Remove
npm uninstall @slack/web-api @slack/bolt

# Install
npm install @dotdo/slack
```

### Import Change

```typescript
// Before
import { WebClient } from '@slack/web-api'
import { App } from '@slack/bolt'

// After
import { WebClient, App } from '@dotdo/slack'
```

### Code Compatibility

Your existing Slack code should work unchanged:

```typescript
// This code works with both @slack/bolt and @dotdo/slack
const app = new App({
  token: process.env.SLACK_BOT_TOKEN,
  signingSecret: process.env.SLACK_SIGNING_SECRET,
})

app.message('hello', async ({ say }) => {
  await say('Hello!')
})
```

## Related

- [slack.do](/docs/integrations/slack/service) - Managed Slack on the edge
- [Pusher Integration](/docs/integrations/pusher) - Real-time messaging
- [Events Overview](/docs/events) - Event handling patterns
