---
title: twilio.do
description: Managed Twilio service on the edge — SMS, Voice, WhatsApp, and Verify with automatic webhook handling and conversation state.
---

# twilio.do

**Twilio on the Edge** — A fully managed Twilio proxy running on Cloudflare Workers with automatic webhook handling, conversation state, and built-in analytics.

```typescript
import { TwilioClient } from 'twilio.do'

const client = new TwilioClient('https://your-worker.workers.dev')

// Send SMS
await client.sms.send({
  to: '+15558675310',
  body: 'Hello from the edge!',
})

// Start voice call
await client.voice.call({
  to: '+15558675310',
  twiml: '<Response><Say>Hello!</Say></Response>',
})
```

<Callout type="info">
Looking for a testing/development package? See [@dotdo/twilio](/docs/integrations/twilio/package) for a drop-in Twilio SDK replacement with mock mode.
</Callout>

## Why twilio.do?

Traditional Twilio integration requires managing webhooks, handling signature verification, and building state management. twilio.do eliminates all of that by running directly on Cloudflare's edge network:

- **Zero Infrastructure** — No webhook servers to manage, no ngrok for development
- **Global by Default** — Low-latency SMS/Voice from 300+ cities worldwide
- **Automatic Webhook Handling** — Signature verification, retry logic, dead letter queues
- **Conversation State** — Durable Objects track multi-turn conversations
- **AI-Native** — Built-in MCP protocol support for AI agents
- **Serverless Economics** — Pay only for what you use, scale to zero

## Features

### Communication Channels

| Channel | Capabilities |
|---------|-------------|
| **SMS** | Send/receive, delivery tracking, MMS, scheduled messages, reply detection |
| **Voice** | Outbound calls, IVR flows, TwiML, recording, transcription, conferencing |
| **WhatsApp** | Text, templates, media, interactive buttons/lists, session management |
| **Verify** | OTP via SMS, voice, email, WhatsApp; custom code length, rate limiting |

### Platform Features

| Feature | Description |
|---------|-------------|
| **Webhook Management** | Automatic signature validation, retry with exponential backoff, DLQ |
| **Conversation State** | Durable Object-backed state for multi-turn conversations |
| **Rate Limiting** | Per-number, per-destination, and global rate limits |
| **Analytics** | Message delivery rates, latency percentiles, error tracking |
| **MCP Protocol** | Model Context Protocol server for AI agent integration |
| **Template Management** | WhatsApp template approval status, versioning |

## Installation

```bash
npm install twilio.do
```

## Quick Start

### Deploy to Cloudflare Workers

```typescript
// src/index.ts
import { TwilioEntrypoint, TwilioService } from 'twilio.do'

export { TwilioService }
export default TwilioEntrypoint
```

```jsonc
// wrangler.jsonc
{
  "name": "my-twilio-do",
  "main": "src/index.ts",
  "compatibility_date": "2025-01-01",
  "compatibility_flags": ["nodejs_compat"],
  "durable_objects": {
    "bindings": [{ "name": "TWILIO_SERVICE", "class_name": "TwilioService" }]
  },
  "migrations": [{ "tag": "v1", "new_sqlite_classes": ["TwilioService"] }],
  "vars": {
    "TWILIO_ACCOUNT_SID": "your-account-sid",
    "TWILIO_AUTH_TOKEN": "your-auth-token",
    "TWILIO_PHONE_NUMBER": "+15017122661"
  }
}
```

```bash
npx wrangler deploy
```

### Local Development

```bash
# Start local server
npx wrangler dev

# Test webhook locally (no ngrok needed!)
curl -X POST http://localhost:8787/webhooks/sms \
  -d "From=+15558675310&Body=Hello"
```

## Examples

### SMS with Delivery Tracking

```typescript
import { TwilioClient } from 'twilio.do'

const client = new TwilioClient('https://your-worker.workers.dev')

// Send with automatic status tracking
const message = await client.sms.send({
  to: '+15558675310',
  body: 'Your order has shipped!',
  trackDelivery: true,
})

// Check delivery status later
const status = await client.sms.getStatus(message.sid)
console.log(status.deliveryState) // 'delivered' | 'failed' | 'pending'
console.log(status.deliveredAt)   // timestamp or null
```

### Voice IVR with State

```typescript
import { TwilioClient, VoiceFlow } from 'twilio.do'

const client = new TwilioClient('https://your-worker.workers.dev')

// Define a stateful voice flow
const supportLine = new VoiceFlow('support')
  .say('Welcome to support. Press 1 for billing, 2 for technical help.')
  .gather({
    numDigits: 1,
    onDigit: async (digit, state) => {
      if (digit === '1') {
        state.department = 'billing'
        return 'say:Connecting you to billing...'
      } else if (digit === '2') {
        state.department = 'technical'
        return 'say:Connecting you to technical support...'
      }
      return 'say:Invalid option. Goodbye.'
    }
  })
  .dial(async (state) => state.department === 'billing' ? '+15551234567' : '+15559876543')

// Register the flow
await client.voice.registerFlow(supportLine)
```

### WhatsApp Conversations

```typescript
import { TwilioClient } from 'twilio.do'

const client = new TwilioClient('https://your-worker.workers.dev')

// Start a conversation with automatic session tracking
const conversation = await client.whatsapp.startConversation({
  to: 'whatsapp:+15558675310',
  templateSid: 'HX123456789', // Required for first message
  templateVariables: { '1': 'John', '2': 'Order #12345' },
})

// Within 24-hour window, send freeform messages
await conversation.send({ body: 'How can I help you today?' })

// Check session status
console.log(conversation.isActive)        // true
console.log(conversation.expiresAt)       // timestamp
console.log(conversation.messagesRemaining) // number or 'unlimited'
```

### OTP Verification Flow

```typescript
import { TwilioClient } from 'twilio.do'

const client = new TwilioClient('https://your-worker.workers.dev')

// Start verification (with automatic rate limiting)
const verification = await client.verify.start({
  to: '+15558675310',
  channel: 'sms',
  codeLength: 6,
  customMessage: 'Your code is {{code}}. Valid for 10 minutes.',
})

// Check the code
const result = await client.verify.check({
  to: '+15558675310',
  code: '123456',
})

if (result.valid) {
  console.log('Phone number verified!')
  // verification.attempts shows how many tries
}
```

### AI Agent with MCP

```typescript
import { createTwilioMcpServer, createAnthropicAdapter } from 'twilio.do/mcp'
import Anthropic from '@anthropic-ai/sdk'

const server = createTwilioMcpServer({
  client: new TwilioClient('https://your-worker.workers.dev'),
  allowedOperations: ['sms.send', 'voice.call', 'verify.start'],
})

const adapter = createAnthropicAdapter({ server })
await adapter.initialize()

const anthropic = new Anthropic()
const response = await anthropic.messages.create({
  model: 'claude-sonnet-4-20250514',
  tools: await adapter.getTools(),
  messages: [{
    role: 'user',
    content: 'Send a reminder SMS to +15558675310 about their appointment tomorrow at 2pm'
  }]
})
```

### Webhook Handler with Automatic Validation

```typescript
import { TwilioEntrypoint, TwilioService, createWebhookRouter } from 'twilio.do'

const webhooks = createWebhookRouter()
  .onSmsReceived(async (message, ctx) => {
    console.log('Received:', message.body, 'from:', message.from)

    // Auto-reply
    await ctx.reply({
      body: `Thanks for your message! We received: "${message.body}"`,
    })
  })
  .onSmsStatus(async (status, ctx) => {
    console.log('Message', status.sid, 'is now', status.status)
    // Update your database, trigger alerts, etc.
  })
  .onVoiceIncoming(async (call, ctx) => {
    return ctx.twiml`
      <Response>
        <Say>Hello! Thanks for calling.</Say>
        <Gather numDigits="1" action="/voice/menu">
          <Say>Press 1 for sales, 2 for support.</Say>
        </Gather>
      </Response>
    `
  })

export { TwilioService }
export default TwilioEntrypoint.withWebhooks(webhooks)
```

## Architecture

```
+---------------------------------------------------------------------+
|                        Client Applications                           |
+-------------------+-------------------+-----------------------------+
|   twilio.do SDK   |    HTTP/RPC       |     Service Binding         |
|   TypeScript      |    REST API       |     Worker-to-Worker        |
+-------------------+-------------------+-----------------------------+
|                       twilio.do Worker (Edge)                        |
+---------------------------------------------------------------------+
| Webhook Router | Rate Limiter | Analytics | MCP Server | TwiML Gen  |
+---------------------------------------------------------------------+
|                    Durable Objects (Conversation State)              |
+-----------------------------------+---------------------------------+
|            Twilio APIs            |          R2 (Recordings)        |
|   api.twilio.com                  |          Media Storage          |
+-----------------------------------+---------------------------------+
```

twilio.do acts as an intelligent proxy:

1. **Request Routing** — Routes API calls to Twilio with automatic retries
2. **Webhook Management** — Receives Twilio webhooks with signature validation
3. **State Management** — Durable Objects track conversation context
4. **Analytics** — Records metrics for all operations
5. **Media Storage** — Optionally stores recordings and media in R2

## Configuration

### Basic Configuration

```jsonc
{
  "vars": {
    "TWILIO_ACCOUNT_SID": "ACXXXXXXXXX",
    "TWILIO_AUTH_TOKEN": "your-auth-token",
    "TWILIO_PHONE_NUMBER": "+15017122661",
    "TWILIO_WHATSAPP_NUMBER": "whatsapp:+14155238886"
  }
}
```

### With Analytics

```jsonc
{
  "analytics_engine_datasets": [{
    "binding": "ANALYTICS",
    "dataset": "twilio_metrics"
  }],
  "vars": {
    "ANALYTICS_ENABLED": "true"
  }
}
```

### With Media Storage

```jsonc
{
  "r2_buckets": [{
    "binding": "MEDIA_BUCKET",
    "bucket_name": "twilio-media"
  }],
  "vars": {
    "STORE_RECORDINGS": "true",
    "STORE_MMS_MEDIA": "true"
  }
}
```

### With Rate Limiting

```jsonc
{
  "vars": {
    "RATE_LIMIT_SMS_PER_SECOND": "10",
    "RATE_LIMIT_VOICE_PER_MINUTE": "30",
    "RATE_LIMIT_VERIFY_PER_HOUR": "5"
  }
}
```

## API Reference

### TwilioClient

```typescript
import { TwilioClient } from 'twilio.do'

const client = new TwilioClient(endpoint, options?)

// SMS
await client.sms.send({ to, body, from?, mediaUrl?, scheduledAt? })
await client.sms.getStatus(sid)
await client.sms.cancel(sid)
await client.sms.list({ to?, from?, dateSent?, limit? })

// Voice
await client.voice.call({ to, twiml?, url?, from?, statusCallback? })
await client.voice.getCall(sid)
await client.voice.update(sid, { twiml?, url?, status? })
await client.voice.getRecordings(callSid)

// WhatsApp
await client.whatsapp.startConversation({ to, templateSid, templateVariables? })
await client.whatsapp.send({ to, body })
await client.whatsapp.sendMedia({ to, mediaUrl, body? })
await client.whatsapp.sendButtons({ to, body, buttons })
await client.whatsapp.getSession(to)

// Verify
await client.verify.start({ to, channel, codeLength?, customMessage? })
await client.verify.check({ to, code })
await client.verify.cancel({ to })

// Analytics
await client.analytics.getDeliveryRate({ start, end, channel? })
await client.analytics.getLatencyPercentiles({ start, end })
await client.analytics.getErrors({ start, end, limit? })
```

### Webhook Router

```typescript
import { createWebhookRouter } from 'twilio.do'

const router = createWebhookRouter()
  // SMS webhooks
  .onSmsReceived((message, ctx) => Promise<void | Response>)
  .onSmsStatus((status, ctx) => Promise<void>)

  // Voice webhooks
  .onVoiceIncoming((call, ctx) => Promise<TwiML | Response>)
  .onVoiceStatus((status, ctx) => Promise<void>)
  .onVoiceRecording((recording, ctx) => Promise<void>)
  .onVoiceTranscription((transcription, ctx) => Promise<void>)

  // WhatsApp webhooks
  .onWhatsAppReceived((message, ctx) => Promise<void | Response>)
  .onWhatsAppStatus((status, ctx) => Promise<void>)

  // Verify webhooks
  .onVerifyCompleted((result, ctx) => Promise<void>)

// Export with webhooks
export default TwilioEntrypoint.withWebhooks(router)
```

### Voice Flows

```typescript
import { VoiceFlow } from 'twilio.do'

const flow = new VoiceFlow(name)
  .say(text, options?)
  .play(url, options?)
  .gather({ numDigits?, timeout?, onDigit?, onSpeech? })
  .record({ maxLength?, transcribe?, onRecording? })
  .dial(numberOrCallback, options?)
  .conference(roomName, options?)
  .enqueue(queueName, options?)
  .redirect(url)
  .hangup()
  .pause(seconds)
```

## Connectivity Options

### HTTP/RPC

```typescript
// Direct HTTP calls
const response = await fetch('https://your-worker.workers.dev/api/sms/send', {
  method: 'POST',
  headers: { 'Authorization': `Bearer ${apiKey}` },
  body: JSON.stringify({
    to: '+15558675310',
    body: 'Hello!',
  })
})
```

### Service Bindings (Zero Latency)

```typescript
// In your consuming worker
export default {
  async fetch(request: Request, env: Env) {
    const result = await env.TWILIO_SERVICE.send({
      channel: 'sms',
      to: '+15558675310',
      body: 'Hello from another worker!',
    })
    return Response.json(result)
  }
}
```

### WebSocket (Real-time Updates)

```typescript
// Subscribe to delivery updates
const ws = new WebSocket('wss://your-worker.workers.dev/ws')
ws.send(JSON.stringify({
  type: 'subscribe',
  channels: ['sms.status', 'voice.status'],
}))

ws.onmessage = (event) => {
  const update = JSON.parse(event.data)
  console.log('Status update:', update)
}
```

## Migration from @dotdo/twilio

Moving from the OSS package to the managed service:

```typescript
// Before: @dotdo/twilio
import twilio from '@dotdo/twilio'
const client = twilio(env.TWILIO_ACCOUNT_SID, env.TWILIO_AUTH_TOKEN)
await client.messages.create({
  body: 'Hello!',
  from: '+15017122661',
  to: '+15558675310',
})

// After: twilio.do
import { TwilioClient } from 'twilio.do'
const client = new TwilioClient('https://your-worker.workers.dev')
await client.sms.send({
  to: '+15558675310',
  body: 'Hello!',
})
// Phone number configured in wrangler.jsonc
```

Key differences:
- No credentials in application code (configured in worker)
- Simplified API (`client.sms.send` vs `client.messages.create`)
- Automatic webhook handling (no manual signature verification)
- Built-in conversation state and analytics

## Related

- [@dotdo/twilio](/docs/integrations/twilio/package) - OSS Twilio SDK for testing
- [Durable Objects](/docs/architecture/durable-objects) - DO-backed state management
- [Events Overview](/docs/events) - Event handling patterns
- [MCP Protocol](/docs/ai/mcp) - AI agent integration
