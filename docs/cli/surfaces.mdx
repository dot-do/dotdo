---
title: Multi-Surface Architecture
description: Build complete applications with App, Admin, Site, Docs, and Blog surfaces
---

# Multi-Surface Architecture

dotdo's surface system lets you build complete applications with multiple frontends from a single project. Each surface serves a different purpose, all sharing the same backend.

## The Five Surfaces

| Surface | Purpose | Example Use |
|---------|---------|-------------|
| **App** | Main application | Dashboard, user workspace, core product |
| **Admin** | Administrative panel | User management, analytics, configuration |
| **Site** | Marketing/landing | Homepage, pricing, features, signup |
| **Docs** | Documentation | API reference, guides, tutorials |
| **Blog** | Content/news | Announcements, tutorials, company blog |

## Routing

Each surface is served at its own path:

```
https://example.com/          <- Site (or App if no Site)
https://example.com/app       <- App
https://example.com/admin     <- Admin
https://example.com/docs      <- Docs
https://example.com/blog      <- Blog
```

### Root Path Priority

The `/` path follows this priority:

1. **Site** - If `Site.tsx` or `Site.mdx` exists
2. **App** - If no Site but `App.tsx` or `App.mdx` exists
3. **404** - If neither exists

This means marketing sites and applications can coexist:

```
Site.mdx at /               # Visitors see landing page
App.tsx at /app             # Users access app after login
```

## File Discovery

Surfaces are discovered automatically based on file names. The discovery order per surface:

1. `./Surface.tsx` - Root directory, TSX format
2. `./Surface.mdx` - Root directory, MDX format
3. `.do/Surface.tsx` - Hidden directory, TSX format
4. `.do/Surface.mdx` - Hidden directory, MDX format

### Example Structure

```
my-project/
  App.tsx           # Main app at /app and /
  Admin.tsx         # Admin panel at /admin
  Site.mdx          # Landing page at / (takes priority)
  .do/
    Docs.mdx        # Documentation at /docs
    Blog.mdx        # Blog at /blog
```

### Why .do/ Directory?

The `.do/` directory serves two purposes:

1. **Cleaner root** - Keep your main directory uncluttered
2. **Scaffolded defaults** - Auto-generated files live here

Files in root take priority, so you can override `.do/` files by creating root equivalents.

## Surface Types

### TSX Surfaces

React components exported as default:

```tsx title="App.tsx"
export default function App() {
  return (
    <div className="app">
      <nav>...</nav>
      <main>...</main>
    </div>
  )
}
```

### MDX Surfaces

Markdown with JSX, perfect for content-heavy surfaces:

```mdx title="Site.mdx"
---
title: Welcome to MyApp
description: The best way to do things
---

# Build Better Products

MyApp helps teams ship faster with AI-powered automation.

<PricingTable />

<SignupForm />
```

## Content Folders

Content-based surfaces (Docs, Blog, Site) can have associated content folders:

```
my-project/
  Docs.mdx              # Shell/layout for docs
  docs/                 # Content folder
    getting-started.mdx
    api/
      authentication.mdx
      endpoints.mdx
```

### Content Folder Discovery

| Surface | Content Folder Priority |
|---------|------------------------|
| Docs | `./docs/` then `.do/docs/` |
| Blog | `./blog/` then `.do/blog/` |
| Site | `./site/` then `.do/site/` |

## Configuration

### Automatic Discovery

By default, surfaces are discovered automatically. No configuration needed:

```typescript title="do.config.ts"
import { defineConfig } from 'dotdo'

export default defineConfig({
  name: 'my-app',
  // Surfaces discovered automatically
})
```

### Explicit Configuration

Override discovery with explicit paths:

```typescript title="do.config.ts"
import { defineConfig } from 'dotdo'

export default defineConfig({
  name: 'my-app',
  surfaces: {
    // Simple string path
    app: './src/App.tsx',
    admin: './src/Admin.tsx',

    // Full config with content directory
    docs: {
      shell: './src/Docs.mdx',
      content: './documentation/',
    },
    blog: {
      shell: './src/Blog.mdx',
      content: './posts/',
    },
    site: {
      shell: './src/Site.mdx',
      content: './pages/',
    },
  },
})
```

## Building Each Surface

### App Surface

Your main application. Typically a React SPA:

```tsx title="App.tsx"
import { BrowserRouter, Routes, Route } from 'react-router-dom'
import { Dashboard } from './components/Dashboard'
import { Settings } from './components/Settings'
import { Profile } from './components/Profile'

export default function App() {
  return (
    <BrowserRouter basename="/app">
      <Layout>
        <Routes>
          <Route path="/" element={<Dashboard />} />
          <Route path="/settings" element={<Settings />} />
          <Route path="/profile" element={<Profile />} />
        </Routes>
      </Layout>
    </BrowserRouter>
  )
}
```

### Admin Surface

Administrative interface, often with different styling:

```tsx title="Admin.tsx"
import { AdminLayout } from './components/AdminLayout'
import { UserManagement } from './admin/UserManagement'
import { Analytics } from './admin/Analytics'

export default function Admin() {
  return (
    <AdminLayout>
      <Routes>
        <Route path="/" element={<Analytics />} />
        <Route path="/users" element={<UserManagement />} />
      </Routes>
    </AdminLayout>
  )
}
```

### Site Surface (MDX)

Marketing pages with rich content:

```mdx title="Site.mdx"
---
title: MyApp - Ship Faster
description: AI-powered development for modern teams
---

import { Hero, Features, Pricing, Footer } from './components/marketing'

<Hero
  headline="Ship 10x Faster"
  subheadline="AI agents handle the repetitive work so you can focus on what matters"
  cta={{ text: "Get Started", href: "/app" }}
/>

<Features items={[
  { title: "AI Agents", description: "Priya writes specs, Ralph builds code" },
  { title: "Human Escalation", description: "Approve decisions that matter" },
  { title: "Edge Deployment", description: "300+ cities, 0ms cold starts" },
]} />

<Pricing />

<Footer />
```

### Docs Surface

Documentation with navigation:

```mdx title="Docs.mdx"
---
title: Documentation
---

import { DocsLayout, Sidebar, Content } from './components/docs'

<DocsLayout>
  <Sidebar />
  <Content />
</DocsLayout>
```

With content files:

```mdx title="docs/getting-started.mdx"
---
title: Getting Started
order: 1
---

# Getting Started

Install the package and create your first project...
```

### Blog Surface

Blog posts with metadata:

```mdx title="Blog.mdx"
---
title: Blog
---

import { BlogLayout, PostList } from './components/blog'

<BlogLayout>
  <PostList />
</BlogLayout>
```

With posts:

```mdx title="blog/2024-01-15-launching-v2.mdx"
---
title: Launching v2.0
date: 2024-01-15
author: Nathan
tags: [release, announcement]
---

# Launching v2.0

We're excited to announce the release of version 2.0...
```

## Shared Components

Surfaces can share components:

```
my-project/
  components/
    shared/
      Button.tsx
      Card.tsx
    marketing/
      Hero.tsx
      Pricing.tsx
    admin/
      DataTable.tsx
      Charts.tsx
  App.tsx
  Admin.tsx
  Site.mdx
```

Import in any surface:

```tsx
import { Button } from './components/shared/Button'
import { Hero } from './components/marketing/Hero'
```

## Authentication Boundaries

Different surfaces often have different auth requirements:

| Surface | Typical Auth |
|---------|--------------|
| Site | Public |
| Docs | Public or gated |
| Blog | Public |
| App | Authenticated |
| Admin | Authenticated + role |

Handle this in your layouts:

```tsx title="App.tsx"
import { AuthProvider, RequireAuth } from './auth'

export default function App() {
  return (
    <AuthProvider>
      <RequireAuth>
        {/* Protected app content */}
      </RequireAuth>
    </AuthProvider>
  )
}
```

```tsx title="Admin.tsx"
import { AuthProvider, RequireRole } from './auth'

export default function Admin() {
  return (
    <AuthProvider>
      <RequireRole role="admin">
        {/* Protected admin content */}
      </RequireRole>
    </AuthProvider>
  )
}
```

## Development Workflow

### Start with Surfaces

```bash
do start
```

The CLI shows all discovered surfaces:

```
Surfaces
  App:      http://localhost:4000          (./App.tsx)
  Admin:    http://localhost:4000/admin    (./Admin.tsx)
  Site:     http://localhost:4000/site     (./Site.mdx)
  Docs:     http://localhost:4000/docs     (.do/Docs.mdx)
  Blog:     (not configured)
```

### Add a New Surface

Create the file:

```bash
touch Blog.mdx
```

Restart or save any file - it's automatically discovered.

### Remove a Surface

Delete or rename the file:

```bash
rm Admin.tsx
# Or
mv Admin.tsx Admin.tsx.bak
```

## Deployment

All surfaces deploy together as a single worker:

```bash
do deploy
```

The router handles all paths:

```
https://my-app.workers.dev/          # Site
https://my-app.workers.dev/app       # App
https://my-app.workers.dev/admin     # Admin
https://my-app.workers.dev/docs      # Docs
https://my-app.workers.dev/blog      # Blog
```

### Custom Domains

Point different domains to different surfaces via Cloudflare routing rules or your DNS configuration.

## Best Practices

### 1. Keep Site Simple

The marketing site should load fast. Minimize JavaScript:

```mdx title="Site.mdx"
{/* Static content, minimal interactivity */}
<Hero />
<Features />
<Pricing />
```

### 2. Lazy Load Admin

Admin is rarely the first thing users visit:

```tsx title="App.tsx"
// Don't import admin components in the main app
// Let the separate Admin surface handle it
```

### 3. Separate Concerns

Each surface has its own:
- Entry point
- Routing
- Styling
- Dependencies (tree-shaken per surface)

### 4. Share Carefully

Share only what's truly common:
- Design tokens
- Utility functions
- Type definitions

Don't share:
- Layout components (different per surface)
- Feature components (different requirements)

## Next Steps

- [Configuration](/docs/cli/config) - Configure surfaces explicitly
- [Deploy](/docs/cli/deploy) - Ship all surfaces together
- [UI Components](/docs/ui/components) - MDXUI component library
