---
title: CouchDB
description: Choose between @dotdo/couchdb (OSS package) and couchdb.do (managed edge service) for your CouchDB needs.
---

# CouchDB Integration

dotdo provides two ways to work with CouchDB-compatible APIs:

| | @dotdo/couchdb | couchdb.do |
|---|----------------|------------|
| **Type** | OSS npm package | Managed edge service |
| **Storage** | In-memory | Durable Object SQLite |
| **Persistence** | None (resets on restart) | Full durability |
| **Use case** | Testing, prototyping | Production workloads |
| **Infrastructure** | Zero | Zero (we manage it) |
| **Install** | `npm install @dotdo/couchdb` | Deploy to Cloudflare |

## Quick Comparison

```typescript
// @dotdo/couchdb - In-memory, great for tests
import { CouchDB } from '@dotdo/couchdb'

const db = new CouchDB('mydb')
await db.put({ _id: 'doc1', type: 'post', title: 'Hello World' })
// Data lost on restart
```

```typescript
// couchdb.do - Persistent edge database
import { CouchDB } from 'couchdb.do'

const db = new CouchDB('https://your-worker.workers.dev/mydb')
await db.put({ _id: 'doc1', type: 'post', title: 'Hello World' })
// Data persists globally
```

## When to Use Each

### Use @dotdo/couchdb when:

- **Unit testing** - Fast, isolated tests without external dependencies
- **Prototyping** - Quick iteration without infrastructure setup
- **Edge functions** - Need CouchDB API but no persistence required
- **CI/CD pipelines** - Tests that need MapReduce view semantics

<Callout type="info">
@dotdo/couchdb is a complete in-memory CouchDB implementation with MapReduce views. Perfect for tests and development, but data doesn't persist between restarts.
</Callout>

### Use couchdb.do when:

- **Production applications** - Real user data that must persist
- **Global edge deployment** - Data close to users worldwide
- **MapReduce workloads** - Complex aggregations with reduce functions
- **Real-time sync** - Change feeds and replication

<Callout type="info">
couchdb.do is CouchDB on the Edge - a fully managed service running on Cloudflare's global network with zero infrastructure to manage.
</Callout>

## Feature Comparison

| Feature | @dotdo/couchdb | couchdb.do |
|---------|----------------|------------|
| Document CRUD | Yes | Yes |
| MapReduce Views | Yes | Yes |
| Compound Keys | Yes | Yes |
| Range Queries | Yes | Yes |
| Built-in Reduces | `_count`, `_sum`, `_stats` | `_count`, `_sum`, `_stats` |
| Custom Reduces | Yes | Yes |
| Bulk Operations | Yes | Yes |
| Revision Tracking | Yes | Yes |
| Change Feeds | No | Yes |
| Replication | No | Yes |
| Transactions | No | Yes |
| Design Document Validation | Basic | Full |
| Wire Protocol Compat | No | Yes (Fauxton, PouchDB) |

## Getting Started

<div className="grid grid-cols-1 md:grid-cols-2 gap-4 mt-6">
  <a href="/docs/integrations/couchdb/package" className="block p-4 border rounded-lg hover:border-primary">
    <h3 className="font-semibold">@dotdo/couchdb</h3>
    <p className="text-sm text-muted-foreground">In-memory CouchDB for testing and development</p>
  </a>
  <a href="/docs/integrations/couchdb/service" className="block p-4 border rounded-lg hover:border-primary">
    <h3 className="font-semibold">couchdb.do</h3>
    <p className="text-sm text-muted-foreground">Managed CouchDB on the edge for production</p>
  </a>
</div>

## Migration Path

Start with `@dotdo/couchdb` for development, then upgrade to `couchdb.do` for production:

```typescript
// Development (package)
import { CouchDB } from '@dotdo/couchdb'
const db = new CouchDB('mydb')

// Production (service) - same API!
import { CouchDB } from 'couchdb.do'
const db = new CouchDB('https://your-couch.workers.dev/mydb')

// Your application code stays the same
await db.put({ _id: 'user:john', type: 'user', name: 'John' })
const results = await db.view('users', 'byType', { key: 'user' })
```

Both packages share the same CouchDB-compatible API, making migration seamless.
