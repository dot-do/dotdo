---
title: Resend
description: Drop-in replacement for Resend with modern email API, React Email support, and edge-native delivery.
---

# Resend

Drop-in replacement for `resend`. Same API, runs on Cloudflare Workers.

```typescript
// Before
import { Resend } from 'resend'

// After
import { Resend } from '@dotdo/emails'
```

Your existing Resend code works unchanged. No migration required.

## Why resend.do?

| Feature | Resend | resend.do |
|---------|--------|-----------|
| **API compatibility** | Native | 100% compatible |
| **Runtime** | Node.js | Edge (300+ cities) |
| **Cold start** | Variable | 0ms (V8 isolates) |
| **Provider fallback** | No | Yes (MailChannels, SendGrid) |
| **Local development** | Sandbox mode | Full DO capture |
| **React Email** | Native | Supported |
| **Scheduled sending** | Yes | Yes |

## Features

| Feature | Status |
|---------|--------|
| Single email send | Supported |
| Multiple recipients | Supported |
| CC/BCC | Supported |
| Reply-to addresses | Supported |
| HTML content | Supported |
| Plain text content | Supported |
| React Email components | Supported |
| Attachments | Supported |
| Custom headers | Supported |
| Tags | Supported |
| Scheduled sending | Supported |
| Provider failover | Supported |
| Webhooks | Planned |
| Domains API | Planned |
| Audiences API | Planned |

## Quick Start

### Install

```bash
npm install @dotdo/emails
```

### Basic Usage

```typescript
import { Resend } from '@dotdo/emails'

const resend = new Resend('re_xxxxx')

await resend.emails.send({
  from: 'hello@example.com',
  to: 'user@example.com',
  subject: 'Hello from dotdo',
  html: '<h1>Welcome!</h1><p>This is your first email.</p>',
})
```

### Multiple Recipients

```typescript
await resend.emails.send({
  from: 'hello@example.com',
  to: ['user1@example.com', 'user2@example.com'],
  subject: 'Team Update',
  html: '<p>Important announcement...</p>',
})
```

### With Name Format

```typescript
await resend.emails.send({
  from: 'Acme Inc <hello@acme.com>',
  to: 'John Doe <john@example.com>',
  subject: 'Welcome to Acme',
  html: '<h1>Hello John!</h1>',
})
```

## React Email Support

Use React Email components for type-safe, component-based email templates.

```typescript
import { Resend } from '@dotdo/emails'
import { WelcomeEmail } from './emails/welcome'

const resend = new Resend('re_xxxxx')

await resend.emails.send({
  from: 'hello@example.com',
  to: 'user@example.com',
  subject: 'Welcome!',
  react: WelcomeEmail({ name: 'John' }),
})
```

## CC, BCC, and Reply-To

```typescript
await resend.emails.send({
  from: 'sender@example.com',
  to: 'recipient@example.com',
  cc: 'manager@example.com',
  bcc: ['legal@example.com', 'archive@example.com'],
  reply_to: 'support@example.com',
  subject: 'Contract Review',
  html: '<p>Please review the attached contract.</p>',
})
```

## Attachments

```typescript
await resend.emails.send({
  from: 'billing@example.com',
  to: 'customer@example.com',
  subject: 'Your Invoice',
  html: '<p>Please find your invoice attached.</p>',
  attachments: [
    {
      filename: 'invoice.pdf',
      content: Buffer.from(pdfData).toString('base64'),
      content_type: 'application/pdf',
    },
  ],
})
```

## Custom Headers

```typescript
await resend.emails.send({
  from: 'notifications@example.com',
  to: 'user@example.com',
  subject: 'Order Update',
  html: '<p>Your order has shipped!</p>',
  headers: {
    'X-Entity-Ref-ID': 'order-123',
    'X-Campaign-ID': 'shipping-notifications',
  },
})
```

## Tags

Add tags for analytics and filtering.

```typescript
await resend.emails.send({
  from: 'marketing@example.com',
  to: 'subscriber@example.com',
  subject: 'Weekly Newsletter',
  html: '<p>This week in tech...</p>',
  tags: [
    { name: 'campaign', value: 'weekly-newsletter' },
    { name: 'audience', value: 'tech-enthusiasts' },
  ],
})
```

## Scheduled Sending

Schedule emails for future delivery.

```typescript
// Send in 1 hour
const sendAt = new Date(Date.now() + 60 * 60 * 1000)

await resend.emails.send({
  from: 'reminders@example.com',
  to: 'user@example.com',
  subject: 'Meeting Reminder',
  html: '<p>Your meeting starts in 15 minutes.</p>',
  scheduled_at: sendAt.toISOString(),
})
```

## Inbound - Local Development

For local development and testing, use `resend.do` as a drop-in replacement endpoint. Emails are captured in DO SQLite for inspection.

```typescript
import { Resend } from '@dotdo/emails'

// No API key needed for local development
const resend = new Resend()

await resend.emails.send({
  from: 'dev@example.com',
  to: 'test@example.com',
  subject: 'Test Email',
  html: '<p>Testing locally...</p>',
})

// Emails captured in DO storage, not sent to real addresses
```

The compat layer defaults to MailChannels when no API key is provided, making it perfect for development without affecting production email quotas.

## Outbound - Production

In production, connect to real Resend with your API key.

```typescript
import { Resend } from '@dotdo/emails'

const resend = new Resend(process.env.RESEND_API_KEY)

await resend.emails.send({
  from: 'hello@yourcompany.com',
  to: 'customer@example.com',
  subject: 'Welcome!',
  html: '<h1>Welcome to our platform</h1>',
})
```

## Provider Failover

Configure multiple providers for automatic failover.

```typescript
import { Resend } from '@dotdo/emails'

const resend = new Resend({
  providers: {
    providers: [
      { provider: 'resend', apiKey: process.env.RESEND_API_KEY, enabled: true, priority: 1 },
      { provider: 'sendgrid', apiKey: process.env.SENDGRID_API_KEY, enabled: true, priority: 2 },
      { provider: 'mailchannels', enabled: true, priority: 3 },
    ],
    defaultProvider: 'resend',
    retryOnFail: true,
  },
})

// If Resend fails, automatically tries SendGrid, then MailChannels
await resend.emails.send({
  from: 'critical@example.com',
  to: 'ops@example.com',
  subject: 'Alert',
  html: '<p>System alert...</p>',
})
```

## Hono Router

Mount Resend-compatible endpoints in your Hono app.

```typescript
import { Hono } from 'hono'
import { createResendRouter } from '@dotdo/emails'

const app = new Hono()

// Mount at /resend or root
app.route('/resend', createResendRouter())

export default app
```

This creates:
- `POST /resend/emails` - Send email (Resend-compatible)
- `GET /resend/emails/:id` - Get email by ID

## TypeScript Types

Full TypeScript support with Resend-compatible types.

```typescript
import type {
  // Request/Response types
  ResendEmailRequest,
  ResendEmailResponse,
  ResendErrorResponse,
  ResendAttachment,
  ResendTag,

  // Internal types
  EmailMessage,
  EmailAddress,
  EmailStatus,
  EmailProvider,
  EmailProviderConfig,

  // Webhook types
  WebhookEvent,
  WebhookEventType,
  WebhookSubscription,
} from '@dotdo/emails'
```

## Error Handling

```typescript
import { Resend, ResendAPIError } from '@dotdo/emails'

const resend = new Resend('re_xxxxx')

try {
  await resend.emails.send({
    from: 'invalid',
    to: 'user@example.com',
    subject: 'Test',
    html: '<p>Hello</p>',
  })
} catch (error) {
  if (error instanceof ResendAPIError) {
    console.error('Resend error:', error.statusCode, error.code, error.message)
    // Handle validation_error, not_found, internal_server_error, etc.
  }
}
```

## Migration from resend

### Package Change

```bash
# Remove
npm uninstall resend

# Install
npm install @dotdo/emails
```

### Import Change

```typescript
// Before
import { Resend } from 'resend'

// After
import { Resend } from '@dotdo/emails'

// Everything else stays the same
const resend = new Resend('re_xxxxx')
await resend.emails.send({ ... })
```

## Architecture

```
+-------------------------------------------------------------+
|                  resend.emails.send(data)                    |
+-------------------------------------------------------------+
                              |
              +---------------+---------------+
              v                               v
+--------------------------+    +--------------------------+
|    Development Mode       |    |    Production Mode        |
|   No API key / local      |    |   API key configured      |
|                           |    |                           |
|   +-------------------+   |    |   Provider Router         |
|   |   MailChannels    |   |    |   - Resend (primary)      |
|   |   (free tier)     |   |    |   - SendGrid (fallback)   |
|   +-------------------+   |    |   - MailChannels (last)   |
|                           |    |                           |
|   Emails captured in DO   |    |   Real delivery with      |
|   SQLite for inspection   |    |   automatic failover      |
+--------------------------+    +--------------------------+
```

## Common Patterns

### Welcome Email Flow

```typescript
import { Resend } from '@dotdo/emails'

const resend = new Resend(process.env.RESEND_API_KEY)

async function sendWelcomeEmail(user: { email: string; name: string }) {
  await resend.emails.send({
    from: 'Acme <welcome@acme.com>',
    to: user.email,
    subject: `Welcome to Acme, ${user.name}!`,
    html: `
      <h1>Welcome, ${user.name}!</h1>
      <p>Thanks for signing up. Here's what you can do next...</p>
    `,
  })
}
```

### Transactional Notifications

```typescript
import { Resend } from '@dotdo/emails'

const resend = new Resend(process.env.RESEND_API_KEY)

async function sendOrderConfirmation(order: Order) {
  await resend.emails.send({
    from: 'orders@store.com',
    to: order.customerEmail,
    subject: `Order #${order.id} Confirmed`,
    html: `
      <h1>Order Confirmed</h1>
      <p>Thanks for your order! Here's what you ordered:</p>
      <ul>
        ${order.items.map(item => `<li>${item.name} x ${item.quantity}</li>`).join('')}
      </ul>
      <p><strong>Total: $${order.total}</strong></p>
    `,
    tags: [
      { name: 'type', value: 'order-confirmation' },
      { name: 'order_id', value: order.id },
    ],
  })
}
```

### Password Reset

```typescript
import { Resend } from '@dotdo/emails'

const resend = new Resend(process.env.RESEND_API_KEY)

async function sendPasswordReset(email: string, resetToken: string) {
  const resetUrl = `https://app.example.com/reset?token=${resetToken}`

  await resend.emails.send({
    from: 'security@example.com',
    to: email,
    subject: 'Reset Your Password',
    html: `
      <h1>Password Reset Request</h1>
      <p>Click the link below to reset your password:</p>
      <a href="${resetUrl}">Reset Password</a>
      <p>This link expires in 1 hour.</p>
    `,
    headers: {
      'X-Priority': '1',
    },
  })
}
```

## Related

- [SendGrid Integration](/docs/integrations/sendgrid) - SendGrid compatibility layer
- [Messaging SDKs](/docs/compat/messaging) - Email, SMS, and more
- [Human Escalation](/docs/humans/escalation) - Email-based approval workflows
- [Compat SDKs Overview](/docs/compat) - All API-compatible SDKs
