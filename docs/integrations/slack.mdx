---
title: Slack
description: Drop-in replacement for the Slack SDK with edge compatibility, Block Kit builder, and local testing support.
---

# Slack

Drop-in replacement for the Slack JavaScript SDKs (`@slack/web-api` and `@slack/bolt`). Your existing Slack code works unchanged - just swap the import.

```typescript
// Before: Slack SDK
import { WebClient } from '@slack/web-api'
import { App } from '@slack/bolt'

// After: dotdo
import { WebClient, App } from '@dotdo/slack'

// Code stays the same
const client = new WebClient('xoxb-token')

const result = await client.chat.postMessage({
  channel: 'C1234567890',
  text: 'Hello, World!',
})

const app = new App({
  token: 'xoxb-token',
  signingSecret: 'signing-secret',
})

app.message('hello', async ({ say }) => {
  await say('Hello back!')
})
```

## Why slack.do?

| Slack SDK | @dotdo/slack |
|-----------|--------------|
| Node.js runtime required | Edge-compatible (Cloudflare Workers) |
| Requires `@slack/web-api` + `@slack/bolt` | Single unified package |
| Complex Socket Mode setup | Built-in Socket Mode client |
| No local testing mode | In-memory mode for testing |
| Separate Block Kit JSON | Fluent Block Kit builder |
| Webhook tunnel for dev | Built-in request handling |

**This is a compatibility layer.** It can either forward to real Slack APIs (production) or run entirely locally for testing and development. The API surface matches Slack's official SDKs.

## Features

### Implemented (Core APIs)

**WebClient**
- `chat.postMessage()`, `chat.update()`, `chat.delete()`, `chat.scheduleMessage()`
- `conversations.list()`, `conversations.history()`, `conversations.info()`
- `conversations.create()`, `conversations.join()`, `conversations.leave()`
- `conversations.archive()`, `conversations.unarchive()`, `conversations.invite()`, `conversations.kick()`
- `conversations.members()`, `conversations.rename()`, `conversations.setTopic()`, `conversations.setPurpose()`
- `conversations.open()`, `conversations.close()`, `conversations.replies()`, `conversations.mark()`
- `users.list()`, `users.info()`, `users.lookupByEmail()`
- `views.open()`, `views.push()`, `views.update()`, `views.publish()`
- `reactions.add()`, `reactions.remove()`, `reactions.get()`, `reactions.list()`
- `auth.test()`, `auth.revoke()`

**App (Bolt Framework)**
- `message()` - Message pattern matching with string or regex
- `event()` - Event handlers for all Slack event types
- `action()` - Block action handlers
- `view()` - Modal submission and close handlers
- `shortcut()` - Global and message shortcuts
- `command()` - Slash command handlers
- Global middleware support
- Request signature verification

**Block Kit Builder**
- Fluent builder API for all block types
- Section, Divider, Header, Context, Actions, Image, Input, File, Video blocks
- Interactive elements: buttons, selects, date pickers, time pickers, checkboxes, radio buttons
- Modal and Home tab view builders
- Mrkdwn formatting helpers

**Slash Commands**
- Argument parsing with flags and positional args
- Signature verification
- Immediate and delayed responses
- Modal triggers

**OAuth**
- OAuth 2.0 flow helper
- Installation store interface
- State management

### Not Yet Implemented

- File uploads
- Files API
- Reminders API
- Search API
- Stars API
- Team API
- Usergroups API

## Quick Start

### Install

```bash
npm install @dotdo/slack
```

### Basic Usage

```typescript
import { WebClient } from '@dotdo/slack'

const client = new WebClient('xoxb-your-token')

// Post a simple message
const result = await client.chat.postMessage({
  channel: '#general',
  text: 'Hello from dotdo!',
})

console.log('Message sent:', result.ts)
```

### Bot Framework

```typescript
import { App } from '@dotdo/slack'

const app = new App({
  token: 'xoxb-token',
  signingSecret: 'signing-secret',
})

// Respond to messages containing "hello"
app.message('hello', async ({ say }) => {
  await say('Hello there!')
})

// Handle app mentions
app.event('app_mention', async ({ event, say }) => {
  await say(`Hi <@${event.user}>! How can I help?`)
})

// Handle button clicks
app.action('button_click', async ({ ack, respond }) => {
  await ack()
  await respond('Button clicked!')
})

// Handle slash commands
app.command('/deploy', async ({ command, ack, respond }) => {
  await ack('Starting deployment...')
  // Long-running operation
  await respond(`Deployed ${command.text} successfully!`)
})

// Export for Cloudflare Workers
export default {
  fetch: app.handleRequest.bind(app),
}
```

## Inbound - Using slack.do Locally

For testing and development, use the in-memory mode - no real Slack API calls:

```typescript
import { WebClient, _clearAll, _getMessages } from '@dotdo/slack'

// Create client without token for local mode
const client = new WebClient()

// Messages are stored in memory
await client.chat.postMessage({
  channel: 'C1234567890',
  text: 'Test message',
})

// Retrieve messages for testing
const messages = _getMessages()
console.log(messages[0].text) // 'Test message'

// Clear state between tests
_clearAll()
```

### Local Channel Management

```typescript
const client = new WebClient()

// Create a channel locally
const result = await client.conversations.create({
  name: 'test-channel',
  is_private: false,
})

// List channels
const channels = await client.conversations.list()
console.log(channels.channels) // [{ id: 'C...', name: 'test-channel', ... }]

// Get channel history
const history = await client.conversations.history({
  channel: result.channel!.id,
})
```

## Outbound - Connecting to Real Slack

For production, the client connects to Slack's API:

```typescript
import { WebClient } from '@dotdo/slack'

const client = new WebClient('xoxb-your-token', {
  timeout: 30000,
  retryConfig: {
    retries: 3,
    minTimeout: 1000,
    maxTimeout: 30000,
    factor: 2,
  },
})

// All requests go to slack.com
const result = await client.chat.postMessage({
  channel: 'C1234567890',
  text: 'Production message!',
})
```

### Edge Compatibility

Works in Cloudflare Workers without Node.js dependencies:

```typescript
// worker.ts
import { WebClient } from '@dotdo/slack'

export default {
  async fetch(request: Request, env: Env): Promise<Response> {
    const client = new WebClient(env.SLACK_BOT_TOKEN)

    await client.chat.postMessage({
      channel: '#alerts',
      text: 'Alert from edge worker!',
    })

    return new Response('Message sent')
  },
}
```

## Block Kit Builder

Build rich messages with the fluent Block Kit API:

```typescript
import {
  Blocks,
  section,
  divider,
  header,
  context,
  actions,
  mrkdwn,
  plainText,
  button,
  staticSelect,
  option,
} from '@dotdo/slack'

// Using the Blocks builder
const blocks = new Blocks()
  .header({ text: plainText('Order Confirmation') })
  .section({
    text: mrkdwn('Your order has been *confirmed*!'),
    accessory: button({
      text: plainText('View Order'),
      action_id: 'view_order',
      style: 'primary',
    }),
  })
  .divider()
  .section({
    fields: [
      mrkdwn('*Order ID:*\n12345'),
      mrkdwn('*Status:*\nProcessing'),
      mrkdwn('*Total:*\n$99.99'),
      mrkdwn('*ETA:*\n3-5 days'),
    ],
  })
  .actions({
    elements: [
      button({
        text: plainText('Track Order'),
        action_id: 'track_order',
      }),
      button({
        text: plainText('Cancel Order'),
        action_id: 'cancel_order',
        style: 'danger',
      }),
    ],
  })
  .build()

await client.chat.postMessage({
  channel: '#orders',
  text: 'Order Confirmation',
  blocks,
})
```

### Mrkdwn Formatting Helpers

```typescript
import {
  bold,
  italic,
  strike,
  code,
  codeBlock,
  blockquote,
  link,
  mention,
  channel,
  here,
  atChannel,
  everyone,
  date,
  emoji,
  numberedList,
  bulletList,
  escape,
} from '@dotdo/slack'

const message = `
${bold('Important Update')}
${italic('Posted by')} ${mention('U1234567890')}

${blockquote('This is a quoted message')}

${codeBlock('const greeting = "Hello, World!"', 'javascript')}

Check out ${link('https://example.com', 'our website')}

${emoji('rocket')} ${emoji('tada')}

Tasks:
${bulletList(['Review PR', 'Deploy to staging', 'Run tests'])}

${here()} - Please review by ${date(new Date('2024-12-31'), '{date_short}')}
`
```

## Slash Commands

Handle slash commands with argument parsing:

```typescript
import { SlashCommands, plainText, textInput, Blocks } from '@dotdo/slack'

const commands = new SlashCommands({
  signingSecret: 'your-signing-secret',
  token: 'xoxb-token',
})

// Simple command
commands.register('/hello', async ({ command, ack, respond }) => {
  await ack(`Hello, ${command.user_name}!`)
})

// Command with arguments
commands.register('/deploy', async ({ command, args, ack, respond }) => {
  await ack('Starting deployment...')

  // args.positional: ['production']
  // args.flags: { force: true, branch: 'main' }
  const env = args.positional[0] ?? 'staging'
  const branch = args.flags.branch ?? 'main'

  // Do deployment...
  await respond({
    text: `Deployed ${branch} to ${env}`,
    response_type: 'in_channel',
  })
}, {
  description: 'Deploy to an environment',
  usage: '/deploy [environment] --branch=main --force',
  argConfig: {
    flags: {
      force: { alias: 'f', hasValue: false, description: 'Force deployment' },
      branch: { alias: 'b', hasValue: true, default: 'main' },
    },
  },
})

// Command with modal
commands.register('/feedback', async ({ ack, openModal }) => {
  await ack()
  await openModal({
    title: plainText('Submit Feedback'),
    callback_id: 'feedback_modal',
    submit: plainText('Submit'),
    blocks: new Blocks()
      .input({
        label: plainText('Your feedback'),
        element: textInput({ action_id: 'feedback_input', multiline: true }),
      })
      .build(),
  })
})

// Export for Workers
export default {
  fetch: commands.handleRequest.bind(commands),
}
```

## Bot Framework (SlackBot)

Production-ready bot framework with full event handling:

```typescript
import { SlackBot } from '@dotdo/slack'

const bot = new SlackBot({
  token: 'xoxb-token',
  signingSecret: 'signing-secret',
  logLevel: 'info',
})

// Message handlers with regex
bot.message(/bug (\d+)/i, async ({ context, say }) => {
  const bugId = context.matches?.[1]
  await say(`Looking up bug #${bugId}...`)
})

// Event handlers
bot.event('app_home_opened', async ({ event, client }) => {
  await client.views.publish({
    user_id: event.user,
    view: {
      type: 'home',
      blocks: [
        { type: 'section', text: { type: 'mrkdwn', text: '*Welcome to MyBot!*' } },
        { type: 'divider' },
        { type: 'section', text: { type: 'mrkdwn', text: 'Use /help to get started.' } },
      ],
    },
  })
})

bot.event('reaction_added', async ({ event, client }) => {
  if (event.reaction === 'white_check_mark') {
    await client.chat.postMessage({
      channel: event.item.channel!,
      thread_ts: event.item.ts,
      text: 'Task marked as complete!',
    })
  }
})

// Action handlers
bot.action('approve_button', async ({ ack, respond }) => {
  await ack()
  await respond('Request approved!')
})

// View submissions
bot.view('feedback_modal', async ({ view, ack, client }) => {
  await ack()
  const feedback = view.state?.values?.feedback_block?.feedback_input?.value
  await client.chat.postMessage({
    channel: '#feedback',
    text: `New feedback: ${feedback}`,
  })
})

// Global middleware
bot.use(async ({ next, logger }) => {
  logger.info('Processing event...')
  await next()
})

// Error handling
bot.error(async (error, context) => {
  console.error('Bot error:', error)
})

// Export for Workers
export default {
  fetch: bot.handleRequest.bind(bot),
}
```

### Socket Mode (Development)

```typescript
import { SlackBot } from '@dotdo/slack'

const bot = new SlackBot({
  token: 'xoxb-token',
  appToken: 'xapp-token', // App-level token
  socketMode: true,
})

bot.message('hello', async ({ say }) => {
  await say('Hello!')
})

// Start the bot
await bot.start()

// Stop when done
bot.stop()
```

## OAuth Flow

Handle Slack OAuth for app installation:

```typescript
import { OAuthFlow } from '@dotdo/slack'

const oauth = new OAuthFlow({
  clientId: 'your-client-id',
  clientSecret: 'your-client-secret',
  scopes: ['chat:write', 'channels:read', 'commands'],
  redirectUri: 'https://your-app.com/slack/callback',
  installationStore: {
    async storeInstallation(installation) {
      await db.installations.put(installation.team!.id, installation)
    },
    async fetchInstallation(query) {
      return await db.installations.get(query.teamId!)
    },
  },
})

export default {
  async fetch(request: Request): Promise<Response> {
    const url = new URL(request.url)

    // Install page
    if (url.pathname === '/slack/install') {
      const installUrl = await oauth.generateInstallUrl()
      return Response.redirect(installUrl)
    }

    // OAuth callback
    if (url.pathname === '/slack/callback') {
      const code = url.searchParams.get('code')!
      const state = url.searchParams.get('state')!

      try {
        const installation = await oauth.handleCallback(code, state)
        return new Response(`Installed to ${installation.team?.name}!`)
      } catch (error) {
        return new Response('Installation failed', { status: 400 })
      }
    }

    return new Response('Not found', { status: 404 })
  },
}
```

## Messages API

High-level messages API with convenience methods:

```typescript
import { SlackMessages, message, section, mrkdwn, button, plainText } from '@dotdo/slack'

const messages = new SlackMessages('xoxb-token')

// Simple message
await messages.post('#general', 'Hello, World!')

// Rich message with blocks
await messages.post('#general', {
  text: 'New order received',
  blocks: [
    section({
      text: mrkdwn('*New Order* - #12345'),
      accessory: button({
        text: plainText('View'),
        action_id: 'view_order',
      }),
    }),
  ],
})

// Using message builder
await messages.post('#general', message()
  .text('Status update')
  .as('StatusBot')
  .withEmoji(':robot_face:')
  .build()
)

// Thread replies
const original = await messages.post('#general', 'Starting thread...')
await messages.reply(original, 'This is a reply!')
await messages.reply(original, 'Broadcast reply!', true) // Also post to channel

// Ephemeral messages
await messages.ephemeral('#general', 'U1234567890', 'Only you can see this')

// Update messages
await messages.update(original, 'Updated content!')

// Delete messages
await messages.delete(original)

// Schedule messages
await messages.schedule('#general', Date.now() + 3600000, 'Scheduled for 1 hour from now')

// Convenience methods
await messages.success('#alerts', 'Deployment Complete', 'All services healthy')
await messages.warning('#alerts', 'High CPU', 'Server-1 at 85% CPU')
await messages.error('#alerts', 'Service Down', 'API server unreachable')
await messages.info('#updates', 'Maintenance', 'Scheduled for tonight')
```

## Channel Management

Full channel operations support:

```typescript
import { ChannelManager } from '@dotdo/slack'

const channels = new ChannelManager({ token: 'xoxb-token' })

// Create channels
const channel = await channels.create('project-alpha')
const privateChannel = await channels.create('private-team', { isPrivate: true })

// Channel info
const info = await channels.info(channel.id)
console.log(info.name, info.num_members)

// Manage members
await channels.invite(channel.id, ['U1234567890', 'U0987654321'])
await channels.kick(channel.id, 'U1234567890')
const members = await channels.members(channel.id)

// Update channel
await channels.setTopic(channel.id, 'Project Alpha discussions')
await channels.setPurpose(channel.id, 'Collaboration channel for Project Alpha')
await channels.rename(channel.id, 'project-alpha-v2')

// Archive/unarchive
await channels.archive(channel.id)
await channels.unarchive(channel.id)

// Thread replies
const replies = await channels.replies(channel.id, '1234567890.123456')
```

## Request Signature Verification

Verify incoming Slack requests:

```typescript
import { verifyRequestSignature, generateSignature } from '@dotdo/slack'

// Verify incoming request
const isValid = await verifyRequestSignature({
  signingSecret: 'your-signing-secret',
  body: await request.text(),
  headers: {
    'x-slack-request-timestamp': request.headers.get('x-slack-request-timestamp')!,
    'x-slack-signature': request.headers.get('x-slack-signature')!,
  },
  maxAge: 300, // 5 minutes
})

if (!isValid) {
  return new Response('Invalid signature', { status: 401 })
}

// Generate signature for testing
const signature = await generateSignature(
  'signing-secret',
  String(Math.floor(Date.now() / 1000)),
  JSON.stringify({ type: 'event_callback', ... })
)
```

## Types

Full TypeScript support with comprehensive type definitions:

```typescript
import type {
  // Core types
  Message,
  Channel,
  User,
  Block,
  SlackEvent,
  MessageEvent,
  AppMentionEvent,
  ReactionAddedEvent,

  // Block Kit
  SectionBlock,
  ActionsBlock,
  ContextBlock,
  InputBlock,
  ButtonElement,
  StaticSelectElement,
  TextObject,
  Option,

  // Interactions
  BlockAction,
  BlockActionsPayload,
  ViewSubmissionPayload,
  ShortcutPayload,
  SlashCommand,

  // Middleware
  SlackEventMiddlewareArgs,
  SlackActionMiddlewareArgs,
  SlackViewMiddlewareArgs,
  SlackCommandMiddlewareArgs,
  SayFn,
  RespondFn,
  AckFn,

  // Client
  WebClientOptions,
  ChatPostMessageArguments,
  ChatPostMessageResponse,
  ConversationsListResponse,
} from '@dotdo/slack'
```

## Error Handling

```typescript
import { SlackError, WebClient } from '@dotdo/slack'

const client = new WebClient('xoxb-token')

try {
  await client.chat.postMessage({
    channel: 'C_INVALID',
    text: 'Hello',
  })
} catch (error) {
  if (error instanceof SlackError) {
    console.log('Code:', error.code)       // 'channel_not_found'
    console.log('Message:', error.message) // 'Slack API Error: channel_not_found'
    console.log('Data:', error.data)       // Full response
  }
}
```

### Common Error Codes

| Code | Description |
|------|-------------|
| `channel_not_found` | Channel does not exist or bot not in channel |
| `not_in_channel` | Bot is not a member of the channel |
| `invalid_auth` | Invalid or expired token |
| `missing_scope` | Token lacks required OAuth scope |
| `rate_limited` | Too many requests |
| `message_not_found` | Message does not exist |
| `cant_update_message` | Cannot update this message |

## Migration from Slack SDK

### Package Change

```bash
# Remove
npm uninstall @slack/web-api @slack/bolt

# Install
npm install @dotdo/slack
```

### Import Change

```typescript
// Before
import { WebClient } from '@slack/web-api'
import { App } from '@slack/bolt'

// After
import { WebClient, App } from '@dotdo/slack'
```

### Code Compatibility

Your existing Slack code should work unchanged:

```typescript
// This code works with both @slack/bolt and @dotdo/slack
const app = new App({
  token: process.env.SLACK_BOT_TOKEN,
  signingSecret: process.env.SLACK_SIGNING_SECRET,
})

app.message('hello', async ({ say }) => {
  await say('Hello!')
})

app.command('/echo', async ({ command, ack, respond }) => {
  await ack()
  await respond(command.text)
})
```

## Architecture

```
+-------------------------------------------------------------+
|                    Your Application                          |
|                                                              |
|  const client = new WebClient(token)                         |
|  const app = new App({ token, signingSecret })               |
+-------------------------------------------------------------+
                              |
              +---------------+---------------+
              |                               |
              v                               v
+-------------------------+     +-------------------------+
|   Production Mode       |     |     Local Mode          |
|   (Real Slack API)      |     |     (In-Memory)         |
+-------------------------+     +-------------------------+
|                         |     |                         |
|  -> slack.com/api       |     |  -> In-memory storage   |
|  -> Real messages       |     |  -> No network calls    |
|  -> OAuth flow          |     |  -> Fast testing        |
|  -> Full API            |     |  -> Predictable state   |
|                         |     |                         |
+-------------------------+     +-------------------------+
```

## Common Patterns

### Interactive Message Flow

```typescript
import { SlackBot, Blocks, section, actions, button, mrkdwn, plainText } from '@dotdo/slack'

const bot = new SlackBot({ token: 'xoxb-token', signingSecret: 'secret' })

// Send approval request
async function requestApproval(channel: string, request: { id: string; title: string }) {
  const blocks = new Blocks()
    .section({ text: mrkdwn(`*Approval Request*\n${request.title}`) })
    .actions({
      elements: [
        button({
          text: plainText('Approve'),
          action_id: `approve_${request.id}`,
          style: 'primary',
        }),
        button({
          text: plainText('Reject'),
          action_id: `reject_${request.id}`,
          style: 'danger',
        }),
      ],
    })
    .build()

  await bot.client.chat.postMessage({
    channel,
    text: `Approval request: ${request.title}`,
    blocks,
  })
}

// Handle responses
bot.action(/^approve_(.+)$/, async ({ action, ack, respond, context }) => {
  await ack()
  const requestId = context.matches?.[1]
  await respond({
    text: `Request ${requestId} approved!`,
    replace_original: true,
  })
})

bot.action(/^reject_(.+)$/, async ({ action, ack, respond, context }) => {
  await ack()
  const requestId = context.matches?.[1]
  await respond({
    text: `Request ${requestId} rejected.`,
    replace_original: true,
  })
})
```

### Home Tab Dashboard

```typescript
bot.event('app_home_opened', async ({ event, client }) => {
  const stats = await getStats()

  await client.views.publish({
    user_id: event.user,
    view: {
      type: 'home',
      blocks: [
        { type: 'header', text: { type: 'plain_text', text: 'Dashboard' } },
        { type: 'divider' },
        {
          type: 'section',
          fields: [
            { type: 'mrkdwn', text: `*Active Users*\n${stats.users}` },
            { type: 'mrkdwn', text: `*Open Issues*\n${stats.issues}` },
            { type: 'mrkdwn', text: `*Deployments*\n${stats.deploys}` },
            { type: 'mrkdwn', text: `*Uptime*\n${stats.uptime}` },
          ],
        },
        {
          type: 'actions',
          elements: [
            {
              type: 'button',
              text: { type: 'plain_text', text: 'Refresh' },
              action_id: 'refresh_home',
            },
          ],
        },
      ],
    },
  })
})

bot.action('refresh_home', async ({ ack, body, client }) => {
  await ack()
  // Re-trigger home tab render
  await client.views.publish({
    user_id: body.user.id,
    view: { /* updated view */ },
  })
})
```

## API Coverage

| Resource | Coverage | Notes |
|----------|----------|-------|
| chat.* | Full | All message operations |
| conversations.* | Full | Channel management |
| users.* | Partial | info, list, lookupByEmail |
| views.* | Full | Modals and home tabs |
| reactions.* | Full | Add, remove, list |
| auth.* | Full | test, revoke |
| App events | Full | All event types |
| Block actions | Full | All action types |
| Shortcuts | Full | Global and message |
| Slash commands | Full | With arg parsing |
| OAuth | Full | v2 flow |
| Socket Mode | Full | Development mode |
| files.* | Not yet | |
| reminders.* | Not yet | |
| search.* | Not yet | |

## Related

- [Events Overview](/docs/events) - Event handling patterns
- [SDK Events](/docs/sdk/events) - Event subscription
- [Compat SDKs](/docs/compat) - All API-compatible SDKs
- [Pusher Integration](/docs/integrations/pusher) - Real-time messaging
