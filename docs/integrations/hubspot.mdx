---
title: HubSpot
description: Drop-in replacement for @hubspot/api-client with edge compatibility, workflow automation, and form handling.
---

# HubSpot

Drop-in replacement for the HubSpot API Client (`@hubspot/api-client`). Your existing HubSpot code works unchanged - just swap the import.

```typescript
// Before: HubSpot SDK
import { Client } from '@hubspot/api-client'

// After: dotdo
import { Client } from '@dotdo/hubspot'

// Code stays the same
const hubspot = new Client({ accessToken: 'pat-xxx' })

const contact = await hubspot.crm.contacts.basicApi.create({
  properties: {
    email: 'user@example.com',
    firstname: 'John',
    lastname: 'Doe',
  },
})
```

## Why @dotdo/hubspot?

| @hubspot/api-client | @dotdo/hubspot |
|--------------------|----------------|
| Node.js runtime required | Edge-compatible (Cloudflare Workers) |
| External API calls | Local mode for testing |
| No built-in workflow support | Workflow automation engine |
| Separate forms handling | Integrated form submissions |
| Manual webhook setup | Built-in webhook processing |

**This is a compatibility layer.** It maintains full API compatibility with the official HubSpot client while adding edge-native performance and extended features like workflow automation and form handling.

## Features

### Implemented

**CRM - Contacts**
- `contacts.basicApi.create()` - Create contact
- `contacts.basicApi.getById()` - Get contact
- `contacts.basicApi.update()` - Update contact
- `contacts.basicApi.archive()` - Archive contact
- `contacts.searchApi.doSearch()` - Search contacts
- `contacts.batchApi.*` - Batch operations

**CRM - Companies**
- `companies.basicApi.create()` - Create company
- `companies.basicApi.getById()` - Get company
- `companies.basicApi.update()` - Update company
- `companies.searchApi.doSearch()` - Search companies

**CRM - Deals**
- `deals.basicApi.create()` - Create deal
- `deals.basicApi.getById()` - Get deal
- `deals.basicApi.update()` - Update deal
- Pipeline stage management

**CRM - Tickets**
- `tickets.basicApi.create()` - Create ticket
- `tickets.basicApi.getById()` - Get ticket
- `tickets.basicApi.update()` - Update ticket

**CRM - Products**
- `products.basicApi.create()` - Create product
- `products.basicApi.getById()` - Get product
- Product catalog management

**CRM - Quotes**
- `quotes.basicApi.create()` - Create quote
- `quotes.basicApi.getById()` - Get quote

**Associations (v4 API)**
- `associations.v4.basicApi.create()` - Create association
- `associations.v4.basicApi.getAll()` - Get associations
- `associations.v4.basicApi.archive()` - Remove association

**Engagements**
- Notes, Emails, Calls, Meetings
- Activity timeline

**Properties**
- Custom property management
- Property groups

**Schemas (Custom Objects)**
- Object schema definitions

**Extended Features**
- Workflows - Automated sequences
- Forms - Form submissions and handling
- Webhooks - Event processing

### Not Yet Implemented

- Marketing Email API
- CMS API
- Conversations API
- Files API

## Quick Start

### Basic Usage

```typescript
import { Client } from '@dotdo/hubspot'

const hubspot = new Client({ accessToken: env.HUBSPOT_ACCESS_TOKEN })

// Create a contact
const contact = await hubspot.crm.contacts.basicApi.create({
  properties: {
    email: 'jane@example.com',
    firstname: 'Jane',
    lastname: 'Smith',
    phone: '+1-555-0123',
    company: 'Acme Inc',
  },
})

console.log('Contact ID:', contact.id)
```

### Search Contacts

```typescript
import { Client } from '@dotdo/hubspot'

const hubspot = new Client({ accessToken: env.HUBSPOT_ACCESS_TOKEN })

// Search by email domain
const results = await hubspot.crm.contacts.searchApi.doSearch({
  filterGroups: [{
    filters: [
      {
        propertyName: 'email',
        operator: 'CONTAINS_TOKEN',
        value: '@example.com',
      },
    ],
  }],
  sorts: [{ propertyName: 'createdate', direction: 'DESCENDING' }],
  limit: 10,
})

for (const contact of results.results) {
  console.log(`${contact.properties.firstname} ${contact.properties.lastname}`)
}
```

### Companies and Deals

```typescript
import { Client } from '@dotdo/hubspot'

const hubspot = new Client({ accessToken: env.HUBSPOT_ACCESS_TOKEN })

// Create company
const company = await hubspot.crm.companies.basicApi.create({
  properties: {
    name: 'Acme Corporation',
    domain: 'acme.com',
    industry: 'Technology',
    numberofemployees: '500',
  },
})

// Create deal
const deal = await hubspot.crm.deals.basicApi.create({
  properties: {
    dealname: 'Enterprise License',
    amount: '50000',
    dealstage: 'appointmentscheduled',
    pipeline: 'default',
    closedate: '2024-12-31',
  },
})

// Associate deal with company
await hubspot.crm.associations.v4.basicApi.create(
  'deals',
  deal.id,
  'companies',
  company.id,
  [{ associationCategory: 'HUBSPOT_DEFINED', associationTypeId: 5 }]
)
```

## Batch Operations

```typescript
import { Client } from '@dotdo/hubspot'

const hubspot = new Client({ accessToken: env.HUBSPOT_ACCESS_TOKEN })

// Batch create contacts
const result = await hubspot.crm.contacts.batchApi.create({
  inputs: [
    {
      properties: {
        email: 'user1@example.com',
        firstname: 'User',
        lastname: 'One',
      },
    },
    {
      properties: {
        email: 'user2@example.com',
        firstname: 'User',
        lastname: 'Two',
      },
    },
    {
      properties: {
        email: 'user3@example.com',
        firstname: 'User',
        lastname: 'Three',
      },
    },
  ],
})

console.log(`Created ${result.results.length} contacts`)

// Batch update
await hubspot.crm.contacts.batchApi.update({
  inputs: result.results.map((contact) => ({
    id: contact.id,
    properties: { lifecyclestage: 'lead' },
  })),
})

// Batch read
const contacts = await hubspot.crm.contacts.batchApi.read({
  inputs: result.results.map((c) => ({ id: c.id })),
  properties: ['email', 'firstname', 'lastname', 'lifecyclestage'],
})
```

## Associations

Link CRM objects together:

```typescript
import { Client } from '@dotdo/hubspot'

const hubspot = new Client({ accessToken: env.HUBSPOT_ACCESS_TOKEN })

// Associate contact with company
await hubspot.crm.associations.v4.basicApi.create(
  'contacts',
  contactId,
  'companies',
  companyId,
  [{ associationCategory: 'HUBSPOT_DEFINED', associationTypeId: 1 }]
)

// Get all associations for a contact
const associations = await hubspot.crm.associations.v4.basicApi.getAll(
  'contacts',
  contactId,
  'companies'
)

// Batch associations
await hubspot.crm.associations.v4.batchApi.create(
  'contacts',
  'deals',
  {
    inputs: [
      {
        from: { id: contactId1 },
        to: { id: dealId1 },
        types: [{ associationCategory: 'HUBSPOT_DEFINED', associationTypeId: 3 }],
      },
      {
        from: { id: contactId2 },
        to: { id: dealId2 },
        types: [{ associationCategory: 'HUBSPOT_DEFINED', associationTypeId: 3 }],
      },
    ],
  }
)
```

## Workflow Automation

Create automated sequences:

```typescript
import { HubSpotWorkflows, WorkflowTemplates } from '@dotdo/hubspot'

const workflows = new HubSpotWorkflows({
  accessToken: env.HUBSPOT_ACCESS_TOKEN,
})

// Create a lead nurture workflow
const workflow = await workflows.create({
  name: 'Lead Nurture Sequence',
  type: 'DRIP_DELAY',
  enrollmentTrigger: {
    type: 'form_submission',
    formId: 'form-123',
  },
  actions: [
    {
      type: 'send_email',
      emailId: 'template-welcome',
      delay: { days: 0 },
    },
    {
      type: 'send_email',
      emailId: 'template-features',
      delay: { days: 3 },
    },
    {
      type: 'send_email',
      emailId: 'template-demo-offer',
      delay: { days: 7 },
    },
    {
      type: 'update_contact',
      properties: { lifecyclestage: 'marketingqualifiedlead' },
      delay: { days: 7 },
    },
  ],
})

// Activate workflow
await workflows.activate(workflow.id)

// Manually enroll a contact
await workflows.enroll(workflow.id, contactId)

// Get workflow stats
const stats = await workflows.getStats(workflow.id)
console.log(`Enrolled: ${stats.enrolledCount}, Completed: ${stats.completedCount}`)
```

### Workflow Templates

```typescript
import { WorkflowTemplates } from '@dotdo/hubspot'

// Use pre-built templates
const template = WorkflowTemplates.leadScoring({
  actions: [
    { condition: 'visited_pricing_page', points: 10 },
    { condition: 'downloaded_whitepaper', points: 20 },
    { condition: 'requested_demo', points: 50 },
  ],
  threshold: 50,
  onQualified: {
    type: 'update_contact',
    properties: { lifecyclestage: 'salesqualifiedlead' },
  },
})
```

## Form Handling

```typescript
import { HubSpotForms } from '@dotdo/hubspot'

const forms = new HubSpotForms({
  accessToken: env.HUBSPOT_ACCESS_TOKEN,
})

// Create a form
const form = await forms.create({
  name: 'Contact Us',
  type: 'HUBSPOT',
  fields: [
    { name: 'email', label: 'Email', fieldType: 'email', required: true },
    { name: 'firstname', label: 'First Name', fieldType: 'text' },
    { name: 'lastname', label: 'Last Name', fieldType: 'text' },
    { name: 'message', label: 'Message', fieldType: 'textarea' },
  ],
})

// Submit a form
const submission = await forms.submit(form.id, {
  email: 'visitor@example.com',
  firstname: 'Visitor',
  lastname: 'Name',
  message: 'I have a question...',
})

// List form submissions
const submissions = await forms.getSubmissions(form.id, {
  limit: 50,
})
```

## Webhook Processing

```typescript
import { HubSpotWebhooks } from '@dotdo/hubspot'

const webhooks = new HubSpotWebhooks({
  appId: env.HUBSPOT_APP_ID,
  clientSecret: env.HUBSPOT_CLIENT_SECRET,
})

// Register webhook subscription
await webhooks.subscribe({
  eventType: 'contact.creation',
  propertyName: null,
  active: true,
})

// Handle webhook in your worker
export default {
  async fetch(request: Request, env: Env) {
    const signature = request.headers.get('X-HubSpot-Signature-v3')
    const body = await request.text()

    // Verify signature
    if (!webhooks.verifySignature(body, signature, env.HUBSPOT_CLIENT_SECRET)) {
      return new Response('Invalid signature', { status: 401 })
    }

    const events = JSON.parse(body)

    for (const event of events) {
      if (event.subscriptionType === 'contact.creation') {
        console.log('New contact:', event.objectId)
      }
    }

    return new Response('OK')
  },
}
```

## Local Testing

```typescript
import { HubSpotLocal } from '@dotdo/hubspot'

// Create local instance for testing
const local = new HubSpotLocal()

// Create contacts
const contact = await local.contacts.create({
  email: 'test@example.com',
  firstname: 'Test',
  lastname: 'User',
})

// All operations work locally without API calls
const found = await local.contacts.search({
  filterGroups: [{
    filters: [{ propertyName: 'email', operator: 'EQ', value: 'test@example.com' }],
  }],
})
```

## Error Handling

```typescript
import { Client, HubSpotError } from '@dotdo/hubspot'

const hubspot = new Client({ accessToken: env.HUBSPOT_ACCESS_TOKEN })

try {
  await hubspot.crm.contacts.basicApi.create({
    properties: { email: 'invalid-email' },
  })
} catch (error) {
  if (error instanceof HubSpotError) {
    console.error('Status:', error.status)
    console.error('Category:', error.category)
    console.error('Message:', error.message)
    console.error('Details:', error.details)
  }
}
```

## Types

```typescript
import type {
  // Core types
  Properties,
  Paging,
  CrmObject,

  // Contact types
  Contact,
  ContactCreateInput,
  ContactUpdateInput,

  // Company types
  Company,
  CompanyCreateInput,

  // Deal types
  Deal,
  DealCreateInput,

  // Association types
  AssociationSpec,
  Association,

  // Search types
  FilterOperator,
  Filter,
  FilterGroup,
  SearchRequest,

  // Workflow types
  Workflow,
  WorkflowAction,
  EnrollmentTrigger,

  // Form types
  Form,
  FormField,
  FormSubmission,
} from '@dotdo/hubspot'
```

## Migration from @hubspot/api-client

### 1. Update imports

```typescript
// Before
import { Client } from '@hubspot/api-client'

// After
import { Client } from '@dotdo/hubspot'
```

### 2. Code changes

Most code works unchanged. Check for:

- **Marketing APIs**: Not yet fully supported
- **CMS APIs**: Not yet supported
- **Rate limiting**: Handled automatically

## Next Steps

<Cards>
  <Card title="Salesforce Integration" href="/docs/integrations/salesforce">
    Salesforce CRM with Einstein AI.
  </Card>
  <Card title="Intercom Integration" href="/docs/integrations/intercom">
    Intercom for customer messaging.
  </Card>
  <Card title="Segment Integration" href="/docs/integrations/segment">
    Segment for customer data platform.
  </Card>
</Cards>
