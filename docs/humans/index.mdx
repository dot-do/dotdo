---
title: Human-in-the-Loop
description: AI does the work. Humans make the decisions.
---

import { Cards, Card } from 'fumadocs-ui/components/card'

# Human-in-the-Loop

AI handles the 95%. Humans handle the edge cases. Full audit trail. Clear accountability.

## Installation

The human escalation templates are exported from `humans.do`, a path alias that points to the humans module in the dotdo package. Configure this in your project:

<Tabs items={['tsconfig.json', 'package.json']}>
  <Tab value="tsconfig.json">
```json title="tsconfig.json"
{
  "compilerOptions": {
    "paths": {
      "agents.do": ["./node_modules/dotdo/dist/agents/named/index.js"],
      "humans.do": ["./node_modules/dotdo/dist/lib/humans/index.js"]
    }
  }
}
```
  </Tab>
  <Tab value="package.json">
```json title="package.json"
{
  "imports": {
    "agents.do": "dotdo/agents/named",
    "humans.do": "dotdo/lib/humans"
  }
}
```
  </Tab>
</Tabs>

<Callout type="info">
**Using `npx dotdo init`?** These aliases are configured automatically. You can start importing right away.
</Callout>

### Available Role Templates

The `humans.do` module exports pre-configured role templates for common escalation scenarios:

| Import | Role | Use Case |
|--------|------|----------|
| `ceo` | Chief Executive | Final approvals, strategic decisions |
| `cfo` | Chief Financial | Budget approvals, financial sign-offs |
| `cto` | Chief Technical | Architecture decisions, security approvals |
| `legal` | Legal Counsel | Contract review, compliance sign-off |
| `hr` | Human Resources | Policy decisions, personnel matters |
| `support` | Customer Support | Ticket escalations, customer issues |
| `manager` | Generic Manager | Team-level approvals |

You can also create custom role templates:

```typescript
import { createHumanTemplate } from 'humans.do'

const accountant = createHumanTemplate('senior-accountant')
const approved = await accountant`verify Q4 reconciliation`
```

## The Philosophy

Autonomous doesn't mean unsupervised. The best AI systems know their limits. When confidence drops, stakes rise, or judgment is required, the system escalates to humans.

```typescript
import { legal, ceo, accountant } from 'humans.do'

// Same syntax as AI agents
const contract = await legal`review this partnership agreement`
const approved = await ceo`approve the acquisition`
const verified = await accountant`validate Q4 financials`
```

## Same Interface, Different Intelligence

Humans and AI agents share the same calling convention. Your workflow doesn't care who handles the task - just that it gets handled correctly.

```typescript
import { ralph } from 'agents.do'
import { ceo } from 'humans.do'

// AI builds it
const app = await ralph`build ${spec}`

// Human approves it
const approved = await ceo`approve ${app} for production`
```

## When to Escalate

| Trigger | Example | Why |
|---------|---------|-----|
| **Dollar thresholds** | Refund > $10,000 | Financial risk |
| **Confidence scores** | AI confidence < 80% | Uncertainty |
| **Risk scores** | Audit risk > 0.8 | Compliance |
| **Compliance** | Contract review | Legal exposure |
| **Final approval** | Partnership sign-off | Accountability |

## How It Works

1. **Trigger** - Condition met (threshold, confidence, rule)
2. **Route** - Message sent to Slack, email, or SMS
3. **Wait** - Workflow pauses for human response
4. **Resume** - Workflow continues with decision
5. **Audit** - Full trail of who decided what

```typescript
escalation = this.HumanFunction({
  trigger: 'refund > $10000',
  role: 'senior-accountant',
  sla: '4 hours',
  channels: ['slack', 'email'],
})
```

## Core Concepts

<Cards>
  <Card title="Escalation" href="/docs/humans/escalation">
    Triggers, roles, SLAs, and escalation policies for human intervention.
  </Card>
  <Card title="Approval Workflows" href="/docs/humans/approval-workflows">
    Building approval chains with multi-level sign-offs and parallel approvals.
  </Card>
  <Card title="Notification Channels" href="/docs/humans/notification-channels">
    Email, Slack, Discord, SMS delivery for human notifications.
  </Card>
</Cards>

## Design Principles

### Autonomy with Guardrails

AI agents operate independently within defined boundaries. When they hit an edge case, they escalate rather than guess.

### Humans for Judgment, Not Toil

Don't make humans approve every email. Reserve escalation for decisions that actually require judgment.

### Full Audit Trail

Every escalation is logged. Who was asked, when they responded, what they decided. Compliance teams love this.

### Graceful Degradation

If a human doesn't respond within the SLA, the system can escalate higher, fall back to a default action, or alert operations.

## Related

<Cards>
  <Card title="Agents" href="/docs/agents">
    AI agents that work alongside human escalation workflows.
  </Card>
  <Card title="Workflows" href="/docs/workflows">
    Durable workflow orchestration with the $ context DSL.
  </Card>
  <Card title="Functions" href="/docs/concepts/functions">
    Four function types including HumanFunction for escalation.
  </Card>
  <Card title="Security" href="/docs/security">
    Identity, authorization, and audit trails for human actions.
  </Card>
</Cards>
