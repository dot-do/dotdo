---
title: InfluxDB
description: Choose between @dotdo/influxdb (OSS package) and influxdb.do (managed time-series service) for your time-series data needs.
---

# InfluxDB Integration

dotdo provides two ways to work with InfluxDB-compatible time-series APIs:

| | @dotdo/influxdb | influxdb.do |
|---|-----------------|-------------|
| **Type** | OSS npm package | Managed time-series service |
| **Storage** | In-memory | Durable Object SQLite |
| **Persistence** | None (resets on restart) | Full durability |
| **Use case** | Testing, prototyping | Production metrics |
| **Infrastructure** | Zero | Zero (we manage it) |
| **Install** | `npm install @dotdo/influxdb` | Deploy to Cloudflare |

## Quick Comparison

```typescript
// @dotdo/influxdb - In-memory, great for tests
import { InfluxDB, Point } from '@dotdo/influxdb'

const client = new InfluxDB({ org: 'my-org' })
const writeApi = client.getWriteApi('my-org', 'metrics')

writeApi.writePoint(
  Point('cpu')
    .tag('host', 'server01')
    .floatField('usage', 45.2)
)
await writeApi.close()
// Data lost on restart
```

```typescript
// influxdb.do - Persistent edge time-series
import { InfluxDB, Point } from 'influxdb.do'

const client = new InfluxDB('https://your-worker.workers.dev')
const writeApi = client.getWriteApi('my-org', 'metrics')

writeApi.writePoint(
  Point('cpu')
    .tag('host', 'server01')
    .floatField('usage', 45.2)
)
await writeApi.close()
// Data persists globally
```

## When to Use Each

### Use @dotdo/influxdb when:

- **Unit testing** - Fast, isolated tests without external dependencies
- **Prototyping** - Quick iteration on time-series applications
- **Edge functions** - Need InfluxDB API but no persistence required
- **CI/CD pipelines** - Tests that need InfluxDB semantics

<Callout type="info">
@dotdo/influxdb is a complete in-memory InfluxDB v2 implementation. Perfect for tests and development, but data doesn't persist between restarts.
</Callout>

### Use influxdb.do when:

- **Production metrics** - Real observability data that must persist
- **Global edge deployment** - Metrics collection close to users worldwide
- **IoT applications** - Sensor data ingestion at scale
- **Real-time dashboards** - Live metrics visualization

<Callout type="info">
influxdb.do is InfluxDB on the Edge - a fully managed time-series service running on Cloudflare's global network with zero infrastructure to manage.
</Callout>

## Feature Comparison

| Feature | @dotdo/influxdb | influxdb.do |
|---------|-----------------|-------------|
| Write API | ✅ Full (Point, line protocol) | ✅ Full |
| Query API | ✅ Flux queries | ✅ Flux + InfluxQL |
| Bucket Management | ✅ Basic | ✅ Full CRUD |
| Retention Policies | ✅ In-memory | ✅ Persistent with auto-pruning |
| Downsampling | ✅ ContinuousQuery | ✅ Scheduled tasks |
| Time-Series Compression | ✅ Gorilla XOR | ✅ Optimized columnar |
| Shard Management | ✅ Basic | ✅ Automatic |
| Tag Indexing | ✅ InvertedIndex | ✅ Full cardinality tracking |
| Wire Protocol | ❌ | ✅ InfluxDB CLI compatible |
| HTTP API | ❌ | ✅ v2 API compatible |
| Telegraf Integration | ❌ | ✅ Native support |

## Getting Started

<div className="grid grid-cols-1 md:grid-cols-2 gap-4 mt-6">
  <a href="/docs/integrations/influxdb/package" className="block p-4 border rounded-lg hover:border-primary">
    <h3 className="font-semibold">@dotdo/influxdb</h3>
    <p className="text-sm text-muted-foreground">In-memory InfluxDB for testing and development</p>
  </a>
  <a href="/docs/integrations/influxdb/service" className="block p-4 border rounded-lg hover:border-primary">
    <h3 className="font-semibold">influxdb.do</h3>
    <p className="text-sm text-muted-foreground">Managed time-series database on the edge</p>
  </a>
</div>

## Migration Path

Start with `@dotdo/influxdb` for development, then upgrade to `influxdb.do` for production:

```typescript
// Development (package)
import { InfluxDB, Point } from '@dotdo/influxdb'
const client = new InfluxDB({ org: 'my-org' })
const writeApi = client.getWriteApi('my-org', 'metrics')

// Production (service) - same API!
import { InfluxDB, Point } from 'influxdb.do'
const client = new InfluxDB('https://your-influx.workers.dev')
const writeApi = client.getWriteApi('my-org', 'metrics')

// Your application code stays the same
writeApi.writePoint(
  Point('temperature')
    .tag('location', 'room1')
    .floatField('celsius', 23.5)
)
await writeApi.close()
```

Both packages share the same InfluxDB v2-compatible API, making migration seamless.

## Architecture Comparison

### @dotdo/influxdb

```
┌─────────────────────────────────────────┐
│            Your Application              │
│                                         │
│  import { InfluxDB } from '@dotdo/influxdb' │
└─────────────────────────────────────────┘
                    │
                    v
┌─────────────────────────────────────────┐
│           In-Memory Storage             │
├─────────────────────────────────────────┤
│  TimeSeriesStorage  │  RetentionManager  │
│  SeriesTagIndex     │  DownsampleManager │
└─────────────────────────────────────────┘
```

### influxdb.do

```
┌─────────────────────────────────────────┐
│            Your Application              │
│                                         │
│  import { InfluxDB } from 'influxdb.do' │
└─────────────────────────────────────────┘
                    │
                    v
┌─────────────────────────────────────────┐
│           influxdb.do Worker            │
├─────────────────────────────────────────┤
│  BucketDO     │  ShardDO   │  TaskDO    │
├─────────────────────────────────────────┤
│        Durable Object SQLite            │
└─────────────────────────────────────────┘
```

Both approaches support the same time-series patterns (IoT, metrics, observability) - choose based on whether you need testing convenience or production durability.
