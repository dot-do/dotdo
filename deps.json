{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "description": "Dependency manifest for dotdo monorepo - documents purpose and requirements",
  "version": "1.0.0",
  "categories": {
    "core-runtime": {
      "description": "Essential dependencies for the DO runtime",
      "required": true,
      "packages": {
        "hono": {
          "purpose": "HTTP framework for Workers",
          "required": true,
          "runtime": true
        },
        "drizzle-orm": {
          "purpose": "SQL ORM for SQLite storage in Durable Objects",
          "required": true,
          "runtime": true
        },
        "zod": {
          "purpose": "Runtime type validation and schema definition",
          "required": true,
          "runtime": true
        },
        "capnweb": {
          "purpose": "Cap'n Web RPC protocol implementation",
          "required": true,
          "runtime": true
        },
        "xstate": {
          "purpose": "State machine library for workflow orchestration",
          "required": true,
          "runtime": true
        },
        "jose": {
          "purpose": "JWT/JWS/JWE handling for authentication",
          "required": true,
          "runtime": true
        },
        "sqids": {
          "purpose": "Short unique ID generation",
          "required": true,
          "runtime": true
        }
      }
    },
    "workspace": {
      "description": "Internal workspace packages",
      "required": true,
      "packages": {
        "@dotdo/core": {
          "purpose": "Foundational DO runtime",
          "required": true,
          "internal": true
        },
        "business-as-code": {
          "purpose": "Business primitives (Organization, Company, etc.)",
          "required": false,
          "internal": true
        },
        "digital-tools": {
          "purpose": "Tool/Integration type definitions",
          "required": false,
          "internal": true
        },
        "digital-workers": {
          "purpose": "Worker/Agent type definitions",
          "required": false,
          "internal": true
        }
      }
    },
    "authentication": {
      "description": "Auth-related dependencies",
      "required": false,
      "packages": {
        "better-auth": {
          "purpose": "Authentication framework",
          "required": false,
          "runtime": true
        },
        "@better-auth/stripe": {
          "purpose": "Stripe integration for auth/billing",
          "required": false,
          "runtime": true
        }
      }
    },
    "data-formats": {
      "description": "Data serialization and format handling",
      "required": false,
      "packages": {
        "ajv": {
          "purpose": "JSON Schema validation",
          "required": false,
          "runtime": true
        },
        "ajv-formats": {
          "purpose": "Format validators for AJV",
          "required": false,
          "runtime": true
        },
        "apache-arrow": {
          "purpose": "Columnar data format for analytics",
          "required": false,
          "runtime": true
        },
        "avsc": {
          "purpose": "Avro serialization",
          "required": false,
          "runtime": true
        },
        "parquet-wasm": {
          "purpose": "Parquet file format (WASM)",
          "required": false,
          "runtime": true
        }
      }
    },
    "query-engines": {
      "description": "Database and query engine dependencies",
      "required": false,
      "packages": {
        "@clickhouse/client-web": {
          "purpose": "ClickHouse for analytics queries",
          "required": false,
          "runtime": true
        },
        "@duckdb/duckdb-wasm": {
          "purpose": "In-browser SQL analytics with DuckDB",
          "required": false,
          "runtime": true
        },
        "@electric-sql/pglite": {
          "purpose": "Embedded PostgreSQL",
          "required": false,
          "runtime": true
        },
        "chdb": {
          "purpose": "ClickHouse embedded",
          "required": false,
          "runtime": true
        }
      }
    },
    "ui-core": {
      "description": "Core UI framework dependencies",
      "required": false,
      "context": "Required for app/ and frontend features",
      "packages": {
        "react": {
          "purpose": "UI framework",
          "required": true,
          "runtime": true
        },
        "react-dom": {
          "purpose": "React DOM renderer",
          "required": true,
          "runtime": true
        },
        "@tanstack/react-router": {
          "purpose": "Type-safe routing",
          "required": true,
          "runtime": true
        },
        "@tanstack/react-start": {
          "purpose": "SSR framework",
          "required": true,
          "runtime": true
        }
      }
    },
    "ui-primitives": {
      "description": "Accessible UI component primitives",
      "required": false,
      "packages": {
        "@radix-ui/react-checkbox": {
          "purpose": "Accessible checkbox component",
          "required": false,
          "runtime": true
        },
        "@radix-ui/react-dialog": {
          "purpose": "Accessible dialog/modal",
          "required": false,
          "runtime": true
        },
        "@radix-ui/react-dropdown-menu": {
          "purpose": "Dropdown menus",
          "required": false,
          "runtime": true
        },
        "@radix-ui/react-label": {
          "purpose": "Form labels",
          "required": false,
          "runtime": true
        },
        "@radix-ui/react-select": {
          "purpose": "Select input",
          "required": false,
          "runtime": true
        },
        "@radix-ui/react-separator": {
          "purpose": "Visual separator",
          "required": false,
          "runtime": true
        },
        "@radix-ui/react-slot": {
          "purpose": "Slot composition pattern",
          "required": false,
          "runtime": true
        }
      }
    },
    "styling": {
      "description": "CSS and styling utilities",
      "required": false,
      "packages": {
        "class-variance-authority": {
          "purpose": "Variant-based styling",
          "required": false,
          "runtime": true
        },
        "clsx": {
          "purpose": "Conditional classnames",
          "required": false,
          "runtime": true
        },
        "tailwind-merge": {
          "purpose": "Merge Tailwind classes intelligently",
          "required": false,
          "runtime": true
        },
        "tw-animate-css": {
          "purpose": "Animation utilities",
          "required": false,
          "runtime": true
        },
        "lucide-react": {
          "purpose": "Icon library",
          "required": false,
          "runtime": true
        }
      }
    },
    "forms": {
      "description": "Form handling and validation",
      "required": false,
      "packages": {
        "react-hook-form": {
          "purpose": "Form state management",
          "required": false,
          "runtime": true
        },
        "recharts": {
          "purpose": "Charts and data visualization",
          "required": false,
          "runtime": true
        }
      }
    },
    "documentation": {
      "description": "Documentation framework dependencies",
      "required": false,
      "context": "Required only for docs site",
      "packages": {
        "fumadocs-core": {
          "purpose": "Core documentation framework",
          "required": false,
          "runtime": true
        },
        "fumadocs-mdx": {
          "purpose": "MDX support for docs",
          "required": false,
          "runtime": true
        },
        "fumadocs-openapi": {
          "purpose": "OpenAPI documentation generation",
          "required": false,
          "runtime": true
        },
        "fumadocs-typescript": {
          "purpose": "TypeScript API docs",
          "required": false,
          "runtime": true
        },
        "fumadocs-ui": {
          "purpose": "Documentation UI components",
          "required": false,
          "runtime": true
        },
        "mdxui": {
          "purpose": "MDX component library",
          "required": false,
          "runtime": true
        },
        "@mdxui/beacon": {
          "purpose": "Marketing site components",
          "required": false,
          "runtime": true
        },
        "@mdxui/cockpit": {
          "purpose": "Dashboard components",
          "required": false,
          "runtime": true
        },
        "@mdxui/primitives": {
          "purpose": "Base UI primitives",
          "required": false,
          "runtime": true
        },
        "@mdxui/themes": {
          "purpose": "Theme system",
          "required": false,
          "runtime": true
        }
      }
    },
    "terminal": {
      "description": "Terminal emulation for browser",
      "required": false,
      "packages": {
        "@xterm/xterm": {
          "purpose": "Terminal emulator",
          "required": false,
          "runtime": true
        },
        "@xterm/addon-attach": {
          "purpose": "WebSocket attachment for terminal",
          "required": false,
          "runtime": true
        },
        "@xterm/addon-fit": {
          "purpose": "Terminal sizing/fitting",
          "required": false,
          "runtime": true
        }
      }
    },
    "cli": {
      "description": "CLI-specific dependencies",
      "required": false,
      "context": "Required only for CLI usage",
      "packages": {
        "commander": {
          "purpose": "CLI argument parsing",
          "required": true,
          "runtime": true
        },
        "bun": {
          "purpose": "Bun runtime for CLI",
          "required": false,
          "runtime": true
        }
      }
    },
    "extended-primitives": {
      "description": "Extended DO capabilities",
      "required": false,
      "packages": {
        "bashx": {
          "purpose": "AI-enhanced bash execution (bashx.do)",
          "required": false,
          "runtime": true
        }
      }
    },
    "cloudflare": {
      "description": "Cloudflare-specific dependencies",
      "required": false,
      "packages": {
        "@cloudflare/sandbox": {
          "purpose": "Cloudflare sandbox utilities",
          "required": false,
          "runtime": true
        }
      }
    }
  },
  "devCategories": {
    "build": {
      "description": "Build and compilation tools",
      "packages": ["typescript", "vite", "@vitejs/plugin-react", "vite-tsconfig-paths"]
    },
    "testing": {
      "description": "Test framework and utilities",
      "packages": [
        "vitest",
        "@vitest/coverage-v8",
        "@vitest/expect",
        "@vitest/runner",
        "@vitest/snapshot",
        "@vitest/spy",
        "@vitest/utils",
        "@testing-library/react",
        "@testing-library/user-event",
        "jsdom",
        "@playwright/test"
      ]
    },
    "cloudflare-dev": {
      "description": "Cloudflare Workers development",
      "packages": [
        "wrangler",
        "@cloudflare/workers-types",
        "@cloudflare/vitest-pool-workers",
        "@cloudflare/vite-plugin"
      ]
    },
    "linting": {
      "description": "Code quality tools",
      "packages": [
        "eslint",
        "@typescript-eslint/eslint-plugin",
        "@typescript-eslint/parser",
        "prettier"
      ]
    },
    "database-tools": {
      "description": "Database development tools",
      "packages": ["drizzle-kit", "better-sqlite3", "node-sql-parser", "pgsql-parser"]
    },
    "types": {
      "description": "Type definition packages",
      "packages": [
        "@types/node",
        "@types/react",
        "@types/react-dom",
        "@types/better-sqlite3",
        "@types/mdx"
      ]
    },
    "documentation": {
      "description": "Documentation generation",
      "packages": ["typedoc", "typedoc-plugin-markdown"]
    },
    "release": {
      "description": "Version and release management",
      "packages": ["@changesets/cli", "@changesets/changelog-github"]
    },
    "analysis": {
      "description": "Code analysis tools",
      "packages": ["madge", "tsd"]
    }
  },
  "peerDependencies": {
    "description": "Dependencies that consumers may provide",
    "packages": {
      "@cloudflare/workers-types": {
        "usedBy": ["@dotdo/core"],
        "required": true
      },
      "react": {
        "usedBy": ["@dotdo/react"],
        "required": true
      },
      "@dotdo/client": {
        "usedBy": ["@dotdo/react"],
        "required": true
      },
      "zod": {
        "usedBy": ["@dotdo/react", "@dotdo/digital-workers"],
        "required": false
      },
      "better-sqlite3": {
        "usedBy": ["@dotdo/cli"],
        "required": false
      },
      "drizzle-orm": {
        "usedBy": ["bashx.do"],
        "required": false
      }
    }
  },
  "overrides": {
    "description": "pnpm overrides to fix compatibility issues",
    "esbuild": {
      "version": ">=0.25.0",
      "reason": "Ensure consistent bundler version"
    },
    "@smithy/config-resolver": {
      "version": ">=4.4.0",
      "reason": "Fix AWS SDK compatibility"
    }
  },
  "ignoredBuiltDependencies": {
    "description": "Native dependencies that should not block install",
    "sharp": "Image processing - optional, platform-specific native module",
    "workerd": "Cloudflare runtime - installed separately by wrangler"
  }
}
